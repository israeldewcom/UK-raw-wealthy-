<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raw Wealthy Investment Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        /* [YOUR EXISTING 3000+ LINES OF CSS REMAINS EXACTLY THE SAME] */
        
        :root {
        --primary: #0f172a;
        --secondary: #1e293b;
        --accent-gold: #f59e0b;
        --accent-emerald: #10b981;
        --accent-blue: #3b82f6;
        --accent-purple: #8b5cf6;
        --text-light: #f8fafc;
        --text-muted: #94a3b8;
        --shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        --radius: 12px;
        --success: #10b981;
        --warning: #f59e0b;
        --error: #ef4444;
        --info: #3b82f6;
        --gradient-primary: linear-gradient(135deg, #f59e0b, #d97706);
        --gradient-secondary: linear-gradient(135deg, #10b981, #059669);
        --gradient-blue: linear-gradient(135deg, #3b82f6, #2563eb);
        --gradient-purple: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }
        
        * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Inter', sans-serif;
        }
        
        body {
        background-color: var(--primary);
        color: var(--text-light);
        line-height: 1.6;
        overflow-x: hidden;
        transition: var(--transition);
        }
        
        body.light-mode {
        --primary: #f8fafc;
        --secondary: #e2e8f0;
        --text-light: #0f172a;
        --text-muted: #64748b;
        --shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        background-color: var(--primary);
        color: var(--text-light);
        }
        
        /* ALL OTHER STYLES REMAIN EXACTLY AS YOU HAD THEM */
        /* ... */
        
        body.light-mode {
        --primary: #f8fafc;
        --secondary: #e2e8f0;
        --text-light: #0f172a;
        --text-muted: #64748b;
        --shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        background-color: var(--primary);
        color: var(--text-light);
        }
        
        /* Loading Spinner */
        .loading-spinner {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(15, 23, 42, 0.9);
        z-index: 9999;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        }
        
        .spinner {
        width: 50px;
        height: 50px;
        border: 5px solid rgba(251, 191, 36, 0.3);
        border-radius: 50%;
        border-top-color: var(--accent-gold);
        animation: spin 1s linear infinite;
        margin-bottom: 1rem;
        }
        
        @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
        }
        
        /* Toast Notifications */
        .toast-container {
        position: fixed;
        top: 100px;
        right: 20px;
        z-index: 9998;
        max-width: 350px;
        }
        
        .toast {
        padding: 1rem 1.5rem;
        margin-bottom: 1rem;
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        display: flex;
        align-items: center;
        animation: slideInRight 0.3s, slideOutRight 0.5s 2.5s;
        animation-fill-mode: forwards;
        opacity: 0;
        transform: translateX(100%);
        }
        
        .toast.success {
        background: var(--success);
        color: white;
        }
        
        .toast.error {
        background: var(--error);
        color: white;
        }
        
        .toast.warning {
        background: var(--warning);
        color: white;
        }
        
        .toast.info {
        background: var(--info);
        color: white;
        }
        
        .toast i {
        margin-right: 0.5rem;
        font-size: 1.2rem;
        }
        
        @keyframes slideInRight {
        from {
        opacity: 0;
        transform: translateX(100%);
        }
        to {
        opacity: 1;
        transform: translateX(0);
        }
        }
        
        @keyframes slideOutRight {
        from {
        opacity: 1;
        transform: translateX(0);
        }
        to {
        opacity: 0;
        transform: translateX(100%);
        }
        }
        
        /* Navbar */
        .navbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.5rem 5%;
        background-color: rgba(15, 23, 42, 0.95);
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        box-shadow: var(--shadow);
        transition: var(--transition);
        }
        
        .light-mode .navbar {
        background-color: rgba(248, 250, 252, 0.95);
        }
        
        .navbar.scrolled {
        padding: 1rem 5%;
        background-color: rgba(15, 23, 42, 0.98);
        }
        
        .light-mode .navbar.scrolled {
        background-color: rgba(248, 250, 252, 0.98);
        }
        
        .logo {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--accent-gold);
        }
        
        .logo i {
        color: var(--accent-emerald);
        }
        
        .nav-links {
        display: flex;
        gap: 2rem;
        }
        
        .nav-links a {
        text-decoration: none;
        color: var(--text-light);
        font-weight: 500;
        transition: var(--transition);
        position: relative;
        }
        
        .light-mode .nav-links a {
        color: var(--text-light);
        }
        
        .nav-links a:hover {
        color: var(--accent-gold);
        }
        
        .nav-links a::after {
        content: '';
        position: absolute;
        width: 0;
        height: 2px;
        bottom: -5px;
        left: 0;
        background-color: var(--accent-gold);
        transition: var(--transition);
        }
        
        .nav-links a:hover::after {
        width: 100%;
        }
        
        .nav-buttons {
        display: flex;
        gap: 1rem;
        align-items: center;
        }
        
        .btn {
        padding: 0.7rem 1.5rem;
        border-radius: 5px;
        font-weight: 500;
        cursor: pointer;
        transition: var(--transition);
        border: none;
        outline: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        }
        
        .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        }
        
        .btn-outline {
        background: transparent;
        border: 1px solid var(--accent-emerald);
        color: var(--accent-emerald);
        }
        
        .btn-outline:hover:not(:disabled) {
        background: var(--accent-emerald);
        color: var(--primary);
        }
        
        .light-mode .btn-outline:hover:not(:disabled) {
        color: var(--text-light);
        }
        
        .btn-primary {
        background: linear-gradient(135deg, var(--accent-gold), #f59e0b);
        color: var(--primary);
        }
        
        .btn-primary:hover:not(:disabled) {
        transform: translateY(-3px);
        box-shadow: 0 10px 20px rgba(251, 191, 36, 0.3);
        }
        
        .theme-toggle {
        background: transparent;
        border: none;
        color: var(--text-light);
        font-size: 1.2rem;
        cursor: pointer;
        transition: var(--transition);
        padding: 0.5rem;
        border-radius: 50%;
        }
        
        .theme-toggle:hover {
        background: rgba(255, 255, 255, 0.1);
        }
        
        .light-mode .theme-toggle {
        color: var(--text-light);
        }
        
        .hamburger {
        display: none;
        cursor: pointer;
        font-size: 1.5rem;
        }
        
        /* Mobile Menu */
        .mobile-menu {
        position: fixed;
        top: 0;
        right: -100%;
        width: 280px;
        height: 100vh;
        background: var(--primary);
        z-index: 1001;
        padding: 2rem;
        transition: var(--transition);
        box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
        gap: 2rem;
        }
        
        .light-mode .mobile-menu {
        background: var(--primary);
        }
        
        .mobile-menu.active {
        right: 0;
        }
        
        .mobile-menu-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        }
        
        .mobile-menu-links {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
        }
        
        .mobile-menu-links a {
        color: var(--text-light);
        text-decoration: none;
        font-size: 1.1rem;
        padding: 0.5rem 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        transition: var(--transition);
        }
        
        .light-mode .mobile-menu-links a {
        color: var(--text-light);
        }
        
        .mobile-menu-links a:hover {
        color: var(--accent-gold);
        padding-left: 0.5rem;
        }
        
        .mobile-menu-buttons {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-top: auto;
        }
        
        .mobile-menu-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        display: none;
        }
        
        .mobile-menu-overlay.active {
        display: block;
        }
        
        /* Hero Section */
        .hero {
        min-height: 100vh;
        display: flex;
        align-items: center;
        padding: 0 5%;
        background: linear-gradient(135deg, rgba(15, 23, 42, 0.9), rgba(30, 41, 59, 0.8)), url('https://images.unsplash.com/photo-1642790553125-43a195c07ed7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
        background-size: cover;
        background-position: center;
        position: relative;
        overflow: hidden;
        }
        
        .light-mode .hero {
        background: linear-gradient(135deg, rgba(248, 250, 252, 0.9), rgba(226, 232, 240, 0.8)), url('https://images.unsplash.com/photo-1642790553125-43a195c07ed7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
        }
        
        .hero-content {
        max-width: 600px;
        z-index: 1;
        }
        
        .hero h1 {
        font-size: 3.5rem;
        margin-bottom: 1.5rem;
        line-height: 1.2;
        }
        
        .hero p {
        font-size: 1.2rem;
        margin-bottom: 2rem;
        color: var(--text-muted);
        }
        
        .hero-buttons {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
        }
        
        .hero-stats {
        display: flex;
        gap: 2rem;
        flex-wrap: wrap;
        }
        
        .stat {
        display: flex;
        flex-direction: column;
        }
        
        .stat-value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--accent-gold);
        }
        
        .stat-label {
        font-size: 0.9rem;
        color: var(--text-muted);
        }
        
        .hero-visual {
        position: absolute;
        right: 5%;
        bottom: 10%;
        width: 500px;
        height: 400px;
        background: linear-gradient(135deg, var(--accent-emerald), var(--accent-gold));
        border-radius: 20px;
        opacity: 0.1;
        transform: rotate(10deg);
        animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
        0% { transform: translateY(0px) rotate(10deg); }
        50% { transform: translateY(-20px) rotate(10deg); }
        100% { transform: translateY(0px) rotate(10deg); }
        }
        
        /* About Section */
        .section {
        padding: 5rem 5%;
        }
        
        .section-title {
        text-align: center;
        margin-bottom: 3rem;
        }
        
        .section-title h2 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        position: relative;
        display: inline-block;
        }
        
        .section-title h2::after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 4px;
        background: var(--accent-gold);
        border-radius: 2px;
        }
        
        .section-title p {
        color: var(--text-muted);
        max-width: 600px;
        margin: 0 auto;
        }
        
        .about-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 3rem;
        align-items: center;
        }
        
        .about-text h3 {
        font-size: 1.8rem;
        margin-bottom: 1.5rem;
        }
        
        .about-features {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
        margin-top: 2rem;
        }
        
        .feature {
        display: flex;
        align-items: flex-start;
        gap: 1rem;
        transition: var(--transition);
        padding: 1rem;
        border-radius: var(--radius);
        }
        
        .feature:hover {
        background: var(--secondary);
        transform: translateY(-5px);
        }
        
        .light-mode .feature:hover {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .feature-icon {
        width: 50px;
        height: 50px;
        background: var(--secondary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--accent-gold);
        font-size: 1.2rem;
        flex-shrink: 0;
        }
        
        .light-mode .feature-icon {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .feature-content h4 {
        margin-bottom: 0.5rem;
        }
        
        .feature-content p {
        color: var(--text-muted);
        font-size: 0.9rem;
        }
        
        .about-image {
        position: relative;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: var(--shadow);
        transform: perspective(1000px) rotateY(-5deg);
        transition: var(--transition);
        }
        
        .about-image:hover {
        transform: perspective(1000px) rotateY(0deg);
        }
        
        .about-image img {
        width: 100%;
        height: auto;
        display: block;
        }
        
        /* Plans Section */
        .plans {
        background-color: var(--secondary);
        }
        
        .light-mode .plans {
        background-color: rgba(30, 41, 59, 0.1);
        }
        
        .plans-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 3rem;
        }
        
        .plan-card {
        background: var(--primary);
        border-radius: 15px;
        padding: 2rem;
        box-shadow: var(--shadow);
        transition: var(--transition);
        position: relative;
        overflow: hidden;
        border: 1px solid rgba(251, 191, 36, 0.1);
        display: flex;
        flex-direction: column;
        }
        
        .light-mode .plan-card {
        background: white;
        }
        
        .plan-card:hover {
        transform: translateY(-10px);
        border-color: var(--accent-gold);
        }
        
        .plan-badge {
        position: absolute;
        top: 20px;
        right: -30px;
        background: var(--accent-emerald);
        color: var(--primary);
        padding: 5px 30px;
        transform: rotate(45deg);
        font-size: 0.8rem;
        font-weight: 600;
        }
        
        .plan-header {
        text-align: center;
        margin-bottom: 2rem;
        padding-bottom: 1.5rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .light-mode .plan-header {
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .plan-name {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
        }
        
        .plan-price {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--accent-gold);
        }
        
        .plan-period {
        color: var(--text-muted);
        font-size: 0.9rem;
        }
        
        .plan-features {
        margin-bottom: 2rem;
        flex-grow: 1;
        }
        
        .plan-feature {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        margin-bottom: 1rem;
        }
        
        .plan-feature i {
        color: var(--accent-emerald);
        }
        
        .plan-button {
        width: 100%;
        padding: 1rem;
        text-align: center;
        margin-top: auto;
        }
        
        /* How It Works */
        .steps {
        display: flex;
        justify-content: space-between;
        margin-top: 3rem;
        position: relative;
        }
        
        .steps::before {
        content: '';
        position: absolute;
        top: 50px;
        left: 0;
        right: 0;
        height: 2px;
        background: var(--accent-emerald);
        z-index: 0;
        }
        
        .step {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        max-width: 250px;
        position: relative;
        z-index: 1;
        background: var(--secondary);
        padding: 2rem 1.5rem;
        border-radius: var(--radius);
        transition: var(--transition);
        }
        
        .light-mode .step {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .step:hover {
        transform: translateY(-10px);
        box-shadow: var(--shadow);
        }
        
        .step-number {
        width: 60px;
        height: 60px;
        background: var(--accent-gold);
        color: var(--primary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        }
        
        .step-title {
        font-size: 1.2rem;
        margin-bottom: 1rem;
        }
        
        .step-description {
        color: var(--text-muted);
        }
        
        /* Testimonials */
        .testimonials {
        background-color: var(--secondary);
        }
        
        .light-mode .testimonials {
        background-color: rgba(30, 41, 59, 0.1);
        }
        
        .testimonials-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 3rem;
        }
        
        .testimonial-card {
        background: var(--primary);
        border-radius: 15px;
        padding: 2rem;
        box-shadow: var(--shadow);
        transition: var(--transition);
        }
        
        .light-mode .testimonial-card {
        background: white;
        }
        
        .testimonial-card:hover {
        transform: translateY(-5px);
        }
        
        .testimonial-content {
        margin-bottom: 1.5rem;
        font-style: italic;
        position: relative;
        }
        
        .testimonial-content::before {
        content: '"';
        font-size: 4rem;
        color: var(--accent-gold);
        position: absolute;
        top: -20px;
        left: -10px;
        opacity: 0.3;
        line-height: 1;
        }
        
        .testimonial-author {
        display: flex;
        align-items: center;
        gap: 1rem;
        }
        
        .author-avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        overflow: hidden;
        border: 2px solid var(--accent-gold);
        }
        
        .author-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        }
        
        .author-info h4 {
        margin-bottom: 0.2rem;
        }
        
        .author-info p {
        color: var(--text-muted);
        font-size: 0.9rem;
        }
        
        /* Footer */
        footer {
        background-color: #0a0f1c;
        padding: 4rem 5% 2rem;
        }
        
        .light-mode footer {
        background-color: #e2e8f0;
        }
        
        .footer-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 3rem;
        margin-bottom: 3rem;
        }
        
        .footer-column h3 {
        font-size: 1.2rem;
        margin-bottom: 1.5rem;
        position: relative;
        padding-bottom: 0.5rem;
        }
        
        .footer-column h3::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 40px;
        height: 2px;
        background: var(--accent-gold);
        }
        
        .footer-links {
        list-style: none;
        }
        
        .footer-links li {
        margin-bottom: 0.8rem;
        }
        
        .footer-links a {
        color: var(--text-muted);
        text-decoration: none;
        transition: var(--transition);
        display: flex;
        align-items: center;
        gap: 0.5rem;
        }
        
        .footer-links a:hover {
        color: var(--accent-gold);
        padding-left: 5px;
        }
        
        .social-links {
        display: flex;
        gap: 1rem;
        margin-top: 1.5rem;
        }
        
        .social-links a {
        width: 40px;
        height: 40px;
        background: var(--secondary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--text-light);
        transition: var(--transition);
        }
        
        .light-mode .social-links a {
        background: rgba(30, 41, 59, 0.1);
        color: var(--text-light);
        }
        
        .social-links a:hover {
        background: var(--accent-gold);
        color: var(--primary);
        transform: translateY(-3px);
        }
        
        .footer-bottom {
        text-align: center;
        padding-top: 2rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        color: var(--text-muted);
        font-size: 0.9rem;
        }
        
        .light-mode .footer-bottom {
        border-top: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        /* Registration Page */
        .registration-page, .login-page, .dashboard-page, .investment-plans-page, .profile-page, .kyc-page, .investment-history-page, .transaction-history-page, .referral-page, .support-page, .admin-page {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem 5%;
        background: linear-gradient(135deg, rgba(15, 23, 42, 0.9), rgba(30, 41, 59, 0.9)), url('https://images.unsplash.com/photo-1642790553125-43a195c07ed7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
        background-size: cover;
        background-position: center;
        }
        
        .light-mode .registration-page, 
        .light-mode .login-page, 
        .light-mode .dashboard-page, 
        .light-mode .investment-plans-page,
        .light-mode .profile-page,
        .light-mode .kyc-page,
        .light-mode .investment-history-page,
        .light-mode .transaction-history-page,
        .light-mode .referral-page,
        .light-mode .support-page,
        .light-mode .admin-page {
        background: linear-gradient(135deg, rgba(248, 250, 252, 0.9), rgba(226, 232, 240, 0.9)), url('https://images.unsplash.com/photo-1642790553125-43a195c07ed7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
        }
        
        .registration-container, .login-container, .dashboard-container, .investment-plans-container, .profile-container, .kyc-container, .investment-history-container, .transaction-history-container, .referral-container, .support-container, .admin-container {
        display: flex;
        max-width: 1000px;
        width: 100%;
        background: var(--primary);
        border-radius: 20px;
        overflow: hidden;
        box-shadow: var(--shadow);
        }
        
        .light-mode .registration-container, 
        .light-mode .login-container, 
        .light-mode .dashboard-container, 
        .light-mode .investment-plans-container,
        .light-mode .profile-container,
        .light-mode .kyc-container,
        .light-mode .investment-history-container,
        .light-mode .transaction-history-container,
        .light-mode .referral-container,
        .light-mode .support-container,
        .light-mode .admin-container {
        background: white;
        }
        
        .registration-info, .login-info {
        flex: 1;
        padding: 3rem;
        background: linear-gradient(135deg, var(--accent-emerald), var(--accent-gold));
        color: var(--primary);
        display: flex;
        flex-direction: column;
        justify-content: center;
        }
        
        .registration-info h2, .login-info h2 {
        font-size: 2rem;
        margin-bottom: 1.5rem;
        }
        
        .registration-info p, .login-info p {
        margin-bottom: 2rem;
        }
        
        .info-features {
        list-style: none;
        }
        
        .info-features li {
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.8rem;
        }
        
        .info-features i {
        font-size: 1.2rem;
        }
        
        .registration-form, .login-form {
        flex: 1;
        padding: 3rem;
        }
        
        .form-header, .login-form-header {
        text-align: center;
        margin-bottom: 2rem;
        }
        
        .form-header h2, .login-form-header h2 {
        font-size: 2rem;
        margin-bottom: 0.5rem;
        }
        
        .form-header p, .login-form-header p {
        color: var(--text-muted);
        }
        
        .form-group {
        margin-bottom: 1.5rem;
        position: relative;
        }
        
        .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
        }
        
        .form-control {
        width: 100%;
        padding: 1rem;
        background: var(--secondary);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        color: var(--text-light);
        font-size: 1rem;
        transition: var(--transition);
        }
        
        .light-mode .form-control {
        background: rgba(30, 41, 59, 0.1);
        border: 1px solid rgba(0, 0, 0, 0.1);
        color: var(--text-light);
        }
        
        .form-control:focus {
        border-color: var(--accent-emerald);
        outline: none;
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
        }
        
        .password-strength {
        height: 4px;
        margin-top: 0.5rem;
        border-radius: 2px;
        transition: var(--transition);
        }
        
        .password-strength.weak {
        background: var(--error);
        width: 25%;
        }
        
        .password-strength.medium {
        background: var(--warning);
        width: 50%;
        }
        
        .password-strength.strong {
        background: var(--success);
        width: 100%;
        }
        
        .password-toggle {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        color: var(--text-muted);
        cursor: pointer;
        }
        
        .form-footer, .login-form-footer {
        margin-top: 2rem;
        text-align: center;
        }
        
        .form-footer p, .login-form-footer p {
        color: var(--text-muted);
        margin-top: 1rem;
        }
        
        .form-footer a, .login-form-footer a {
        color: var(--accent-gold);
        text-decoration: none;
        }
        
        .forgot-password {
        display: block;
        text-align: right;
        margin-top: 0.5rem;
        color: var(--accent-emerald);
        text-decoration: none;
        font-size: 0.9rem;
        }
        
        .forgot-password:hover {
        text-decoration: underline;
        }
        
        /* Dashboard Page */
        .dashboard-container {
        max-width: 1200px;
        flex-direction: column;
        padding: 0;
        }
        
        .dashboard-header {
        padding: 2rem;
        background: var(--secondary);
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
        }
        
        .light-mode .dashboard-header {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .dashboard-header h1 {
        font-size: 2rem;
        color: var(--accent-gold);
        }
        
        .user-info {
        display: flex;
        align-items: center;
        gap: 1rem;
        }
        
        .user-avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: var(--accent-emerald);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--primary);
        font-weight: bold;
        border: 2px solid var(--accent-gold);
        }
        
        .dashboard-content {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 2rem;
        padding: 2rem;
        }
        
        .stats-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
        margin-bottom: 2rem;
        }
        
        .stat-card {
        background: var(--secondary);
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        display: flex;
        flex-direction: column;
        transition: var(--transition);
        }
        
        .light-mode .stat-card {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .stat-card:hover {
        transform: translateY(-5px);
        }
        
        .stat-card h3 {
        font-size: 1rem;
        color: var(--text-muted);
        margin-bottom: 0.5rem;
        }
        
        .stat-card .value {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--accent-gold);
        }
        
        .chart-container {
        background: var(--secondary);
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        margin-bottom: 2rem;
        }
        
        .light-mode .chart-container {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .chart-container h3 {
        margin-bottom: 1rem;
        }
        
        .investments-list, .transactions-list {
        background: var(--secondary);
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        }
        
        .light-mode .investments-list, .light-mode .transactions-list {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .investments-list h3, .transactions-list h3 {
        margin-bottom: 1rem;
        }
        
        .investment-item, .transaction-item {
        display: flex;
        justify-content: space-between;
        padding: 1rem 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        transition: var(--transition);
        }
        
        .light-mode .investment-item, .light-mode .transaction-item {
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .investment-item:hover, .transaction-item:hover {
        background: rgba(255, 255, 255, 0.05);
        padding-left: 0.5rem;
        padding-right: 0.5rem;
        border-radius: 5px;
        }
        
        .light-mode .investment-item:hover, .light-mode .transaction-item:hover {
        background: rgba(0, 0, 0, 0.05);
        }
        
        .investment-item:last-child, .transaction-item:last-child {
        border-bottom: none;
        }
        
        .investment-name, .transaction-type {
        font-weight: 500;
        }
        
        .investment-amount, .transaction-amount {
        color: var(--accent-gold);
        font-weight: 600;
        }
        
        .investment-status, .transaction-date {
        color: var(--text-muted);
        font-size: 0.9rem;
        }
        
        .quick-actions {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
        }
        
        .action-card {
        background: var(--secondary);
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        text-align: center;
        transition: var(--transition);
        cursor: pointer;
        }
        
        .light-mode .action-card {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .action-card:hover {
        transform: translateY(-5px);
        background: rgba(30, 41, 59, 0.8);
        }
        
        .light-mode .action-card:hover {
        background: rgba(30, 41, 59, 0.2);
        }
        
        .action-card i {
        font-size: 2rem;
        margin-bottom: 1rem;
        color: var(--accent-emerald);
        }
        
        /* Investment Plans Page */
        .investment-plans-container {
        max-width: 1200px;
        flex-direction: column;
        padding: 0;
        }
        
        .investment-plans-header {
        padding: 2rem;
        background: var(--secondary);
        text-align: center;
        }
        
        .light-mode .investment-plans-header {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .investment-plans-header h1 {
        font-size: 2rem;
        color: var(--accent-gold);
        }
        
        .investment-plans-content {
        padding: 2rem;
        }
        
        /* Profile Page */
        .profile-container {
        max-width: 1000px;
        flex-direction: column;
        padding: 0;
        }
        
        .profile-header {
        padding: 2rem;
        background: var(--secondary);
        display: flex;
        justify-content: space-between;
        align-items: center;
        }
        
        .light-mode .profile-header {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .profile-header h1 {
        font-size: 2rem;
        color: var(--accent-gold);
        }
        
        .profile-content {
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 2rem;
        padding: 2rem;
        }
        
        .profile-sidebar {
        background: var(--secondary);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        height: fit-content;
        }
        
        .light-mode .profile-sidebar {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .profile-nav {
        list-style: none;
        }
        
        .profile-nav li {
        margin-bottom: 1rem;
        }
        
        .profile-nav a {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        padding: 0.8rem 1rem;
        color: var(--text-light);
        text-decoration: none;
        border-radius: 8px;
        transition: var(--transition);
        }
        
        .light-mode .profile-nav a {
        color: var(--text-light);
        }
        
        .profile-nav a:hover, .profile-nav a.active {
        background: rgba(251, 191, 36, 0.1);
        color: var(--accent-gold);
        }
        
        .profile-main {
        background: var(--secondary);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        }
        
        .light-mode .profile-main {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .profile-section {
        margin-bottom: 2rem;
        }
        
        .profile-section h2 {
        font-size: 1.5rem;
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .light-mode .profile-section h2 {
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .two-factor-setup {
        background: rgba(16, 185, 129, 0.1);
        padding: 1.5rem;
        border-radius: 10px;
        margin-top: 1rem;
        }
        
        .two-factor-code {
        display: flex;
        gap: 1rem;
        margin: 1rem 0;
        }
        
        .two-factor-code input {
        width: 40px;
        height: 40px;
        text-align: center;
        font-size: 1.2rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 5px;
        background: var(--primary);
        color: var(--text-light);
        }
        
        .light-mode .two-factor-code input {
        background: white;
        color: var(--text-light);
        }
        
        /* KYC Page */
        .kyc-container {
        max-width: 800px;
        flex-direction: column;
        padding: 0;
        }
        
        .kyc-header {
        padding: 2rem;
        background: var(--secondary);
        text-align: center;
        }
        
        .light-mode .kyc-header {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .kyc-header h1 {
        font-size: 2rem;
        color: var(--accent-gold);
        }
        
        .kyc-content {
        padding: 2rem;
        }
        
        .kyc-steps {
        display: flex;
        justify-content: space-between;
        margin-bottom: 2rem;
        position: relative;
        }
        
        .kyc-steps::before {
        content: '';
        position: absolute;
        top: 20px;
        left: 0;
        right: 0;
        height: 2px;
        background: var(--accent-emerald);
        z-index: 0;
        }
        
        .kyc-step {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        position: relative;
        z-index: 1;
        }
        
        .kyc-step-number {
        width: 40px;
        height: 40px;
        background: var(--secondary);
        color: var(--text-light);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        margin-bottom: 0.5rem;
        border: 2px solid var(--accent-emerald);
        }
        
        .kyc-step.active .kyc-step-number {
        background: var(--accent-emerald);
        color: var(--primary);
        }
        
        .kyc-step.completed .kyc-step-number {
        background: var(--accent-emerald);
        color: var(--primary);
        }
        
        .kyc-step-label {
        font-size: 0.9rem;
        color: var(--text-muted);
        }
        
        .kyc-step.active .kyc-step-label {
        color: var(--accent-emerald);
        font-weight: 600;
        }
        
        .kyc-form-section {
        background: var(--secondary);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        margin-bottom: 2rem;
        }
        
        .light-mode .kyc-form-section {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .file-upload {
        border: 2px dashed rgba(255, 255, 255, 0.2);
        border-radius: 10px;
        padding: 2rem;
        text-align: center;
        cursor: pointer;
        transition: var(--transition);
        }
        
        .light-mode .file-upload {
        border: 2px dashed rgba(0, 0, 0, 0.2);
        }
        
        .file-upload:hover {
        border-color: var(--accent-emerald);
        }
        
        .file-upload i {
        font-size: 3rem;
        color: var(--accent-emerald);
        margin-bottom: 1rem;
        }
        
        /* Investment History Page */
        .investment-history-container {
        max-width: 1200px;
        flex-direction: column;
        padding: 0;
        }
        
        .investment-history-header {
        padding: 2rem;
        background: var(--secondary);
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
        }
        
        .light-mode .investment-history-header {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .investment-history-header h1 {
        font-size: 2rem;
        color: var(--accent-gold);
        }
        
        .investment-history-content {
        padding: 2rem;
        }
        
        .filters {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
        }
        
        .filter-select {
        padding: 0.7rem 1rem;
        background: var(--secondary);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 5px;
        color: var(--text-light);
        min-width: 150px;
        }
        
        .light-mode .filter-select {
        background: rgba(30, 41, 59, 0.1);
        border: 1px solid rgba(0, 0, 0, 0.1);
        color: var(--text-light);
        }
        
        /* Transaction History Page */
        .transaction-history-container {
        max-width: 1200px;
        flex-direction: column;
        padding: 0;
        }
        
        .transaction-history-header {
        padding: 2rem;
        background: var(--secondary);
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
        }
        
        .light-mode .transaction-history-header {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .transaction-history-header h1 {
        font-size: 2rem;
        color: var(--accent-gold);
        }
        
        .transaction-history-content {
        padding: 2rem;
        }
        
        /* Referral Page */
        .referral-container {
        max-width: 1000px;
        flex-direction: column;
        padding: 0;
        }
        
        .referral-header {
        padding: 2rem;
        background: var(--secondary);
        text-align: center;
        }
        
        .light-mode .referral-header {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .referral-header h1 {
        font-size: 2rem;
        color: var(--accent-gold);
        }
        
        .referral-content {
        padding: 2rem;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        }
        
        .referral-stats {
        background: var(--secondary);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        }
        
        .light-mode .referral-stats {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .referral-stat {
        display: flex;
        justify-content: space-between;
        padding: 1rem 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .light-mode .referral-stat {
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .referral-stat:last-child {
        border-bottom: none;
        }
        
        .referral-links {
        background: var(--secondary);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        }
        
        .light-mode .referral-links {
        background: rgba(30, 41, 59, 0.1);
        }
        
        /* Support Page */
        .support-container {
        max-width: 1000px;
        flex-direction: column;
        padding: 0;
        }
        
        .support-header {
        padding: 2rem;
        background: var(--secondary);
        text-align: center;
        }
        
        .light-mode .support-header {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .support-header h1 {
        font-size: 2rem;
        color: var(--accent-gold);
        }
        
        .support-content {
        padding: 2rem;
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 2rem;
        }
        
        .support-categories {
        background: var(--secondary);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        height: fit-content;
        }
        
        .light-mode .support-categories {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .support-category {
        padding: 1rem;
        margin-bottom: 1rem;
        border-radius: 8px;
        cursor: pointer;
        transition: var(--transition);
        }
        
        .support-category:hover, .support-category.active {
        background: rgba(251, 191, 36, 0.1);
        color: var(--accent-gold);
        }
        
        .support-category i {
        margin-right: 0.5rem;
        }
        
        .support-main {
        background: var(--secondary);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        }
        
        .light-mode .support-main {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .faq-item {
        margin-bottom: 1.5rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        padding-bottom: 1.5rem;
        }
        
        .light-mode .faq-item {
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .faq-question {
        font-weight: 600;
        margin-bottom: 0.5rem;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        }
        
        .faq-answer {
        color: var(--text-muted);
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
        }
        
        .faq-item.active .faq-answer {
        max-height: 500px;
        }
        
        /* Admin Page */
        .admin-container {
        max-width: 1400px;
        flex-direction: column;
        padding: 0;
        }
        
        .admin-header {
        padding: 2rem;
        background: var(--secondary);
        display: flex;
        justify-content: space-between;
        align-items: center;
        }
        
        .light-mode .admin-header {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .admin-header h1 {
        font-size: 2rem;
        color: var(--accent-gold);
        }
        
        .admin-content {
        padding: 2rem;
        display: grid;
        grid-template-columns: 250px 1fr;
        gap: 2rem;
        }
        
        .admin-sidebar {
        background: var(--secondary);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        height: fit-content;
        }
        
        .light-mode .admin-sidebar {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .admin-nav {
        list-style: none;
        }
        
        .admin-nav li {
        margin-bottom: 1rem;
        }
        
        .admin-nav a {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        padding: 0.8rem 1rem;
        color: var(--text-light);
        text-decoration: none;
        border-radius: 8px;
        transition: var(--transition);
        }
        
        .light-mode .admin-nav a {
        color: var(--text-light);
        }
        
        .admin-nav a:hover, .admin-nav a.active {
        background: rgba(251, 191, 36, 0.1);
        color: var(--accent-gold);
        }
        
        .admin-main {
        background: var(--secondary);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: var(--shadow);
        }
        
        .light-mode .admin-main {
        background: rgba(30, 41, 59, 0.1);
        }
        
        .admin-stats {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 1.5rem;
        margin-bottom: 2rem;
        }
        
        .admin-stat {
        background: var(--primary);
        padding: 1.5rem;
        border-radius: 10px;
        text-align: center;
        transition: var(--transition);
        }
        
        .light-mode .admin-stat {
        background: white;
        }
        
        .admin-stat:hover {
        transform: translateY(-5px);
        }
        
        .admin-stat .value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--accent-gold);
        display: block;
        }
        
        .admin-stat .label {
        color: var(--text-muted);
        font-size: 0.9rem;
        }
        
        .admin-table {
        width: 100%;
        border-collapse: collapse;
        }
        
        .admin-table th, .admin-table td {
        padding: 1rem;
        text-align: left;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .light-mode .admin-table th, .light-mode .admin-table td {
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .admin-table th {
        color: var(--text-muted);
        font-weight: 600;
        }
        
        .status-badge {
        padding: 0.3rem 0.8rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        }
        
        .status-badge.pending {
        background: rgba(245, 158, 11, 0.2);
        color: var(--warning);
        }
        
        .status-badge.approved {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
        }
        
        .status-badge.rejected {
        background: rgba(239, 68, 68, 0.2);
        color: var(--error);
        }
        
        /* Modal */
        .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 2000;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        }
        
        .modal-content {
        background: var(--primary);
        padding: 2rem;
        border-radius: 15px;
        max-width: 500px;
        width: 100%;
        box-shadow: var(--shadow);
        max-height: 90vh;
        overflow-y: auto;
        animation: modalAppear 0.3s ease;
        }
        
        .light-mode .modal-content {
        background: white;
        }
        
        @keyframes modalAppear {
        from {
        opacity: 0;
        transform: scale(0.9);
        }
        to {
        opacity: 1;
        transform: scale(1);
        }
        }
        
        .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        }
        
        .modal-header h2 {
        font-size: 1.5rem;
        color: var(--accent-gold);
        }
        
        .close-modal {
        background: none;
        border: none;
        color: var(--text-light);
        font-size: 1.5rem;
        cursor: pointer;
        transition: var(--transition);
        }
        
        .close-modal:hover {
        color: var(--accent-gold);
        }
        
        /* Password Reset Modal */
        .password-reset-steps {
        display: flex;
        justify-content: space-between;
        margin-bottom: 2rem;
        position: relative;
        }
        
        .password-reset-steps::before {
        content: '';
        position: absolute;
        top: 15px;
        left: 0;
        right: 0;
        height: 2px;
        background: var(--accent-emerald);
        z-index: 0;
        }
        
        .password-reset-step {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        position: relative;
        z-index: 1;
        }
        
        .password-reset-step-number {
        width: 30px;
        height: 30px;
        background: var(--secondary);
        color: var(--text-light);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        margin-bottom: 0.5rem;
        border: 2px solid var(--accent-emerald);
        font-size: 0.8rem;
        }
        
        .password-reset-step.active .password-reset-step-number {
        background: var(--accent-emerald);
        color: var(--primary);
        }
        
        .password-reset-step.completed .password-reset-step-number {
        background: var(--accent-emerald);
        color: var(--primary);
        }
        
        .password-reset-step-label {
        font-size: 0.7rem;
        color: var(--text-muted);
        }
        
        .password-reset-step.active .password-reset-step-label {
        color: var(--accent-emerald);
        font-weight: 600;
        }
        
        /* Back to Top Button */
        .back-to-top {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 50px;
        height: 50px;
        background: var(--accent-gold);
        color: var(--primary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        cursor: pointer;
        transition: var(--transition);
        opacity: 0;
        visibility: hidden;
        z-index: 999;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        
        .back-to-top.visible {
        opacity: 1;
        visibility: visible;
        }
        
        .back-to-top:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
        }
        
        /* File Upload Styles */
        .file-upload-container {
        border: 2px dashed rgba(255, 255, 255, 0.2);
        border-radius: 10px;
        padding: 2rem;
        text-align: center;
        transition: var(--transition);
        cursor: pointer;
        margin-bottom: 1rem;
        }
        
        .light-mode .file-upload-container {
        border: 2px dashed rgba(0, 0, 0, 0.2);
        }
        
        .file-upload-container:hover {
        border-color: var(--accent-emerald);
        }
        
        .file-upload-container i {
        font-size: 3rem;
        color: var(--accent-emerald);
        margin-bottom: 1rem;
        }
        
        .file-preview {
        max-width: 100%;
        max-height: 200px;
        margin-top: 1rem;
        border-radius: 5px;
        display: none;
        }
        
        /* Currency Toggle */
        .currency-toggle {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1rem;
        }
        
        .currency-toggle label {
        font-weight: 500;
        }
        
        .currency-toggle select {
        background: var(--secondary);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 5px;
        color: var(--text-light);
        padding: 0.5rem;
        }
        
        /* Withdrawal Fee Notice */
        .withdrawal-fee-notice {
        background: rgba(245, 158, 11, 0.1);
        border: 1px solid rgba(245, 158, 11, 0.3);
        border-radius: 8px;
        padding: 1rem;
        margin-bottom: 1.5rem;
        color: var(--warning);
        font-size: 0.9rem;
        }
        
        .withdrawal-fee-notice i {
        margin-right: 0.5rem;
        }
        
        /* Responsive Design */
        @media (max-width: 1200px) {
        .admin-content {
        grid-template-columns: 1fr;
        }
        
        .admin-sidebar {
        order: 2;
        }
        
        .admin-main {
        order: 1;
        }
        
        .admin-stats {
        grid-template-columns: repeat(2, 1fr);
        }
        }
        
        @media (max-width: 992px) {
        .hero h1 {
        font-size: 2.8rem;
        }
        
        .steps {
        flex-direction: column;
        gap: 3rem;
        }
        
        .steps::before {
        display: none;
        }
        
        .registration-container, .login-container {
        flex-direction: column;
        }
        
        .dashboard-content {
        grid-template-columns: 1fr;
        }
        
        .profile-content {
        grid-template-columns: 1fr;
        }
        
        .referral-content {
        grid-template-columns: 1fr;
        }
        
        .support-content {
        grid-template-columns: 1fr;
        }
        
        .about-content {
        grid-template-columns: 1fr;
        }
        }
        
        @media (max-width: 768px) {
        .navbar {
        padding: 1rem 5%;
        }
        
        .nav-links, .nav-buttons {
        display: none;
        }
        
        .hamburger {
        display: block;
        }
        
        .hero h1 {
        font-size: 2.2rem;
        }
        
        .hero-buttons {
        flex-direction: column;
        }
        
        .hero-stats {
        flex-direction: column;
        gap: 1rem;
        }
        
        .about-features {
        grid-template-columns: 1fr;
        }
        
        .stats-grid {
        grid-template-columns: 1fr;
        }
        
        .admin-stats {
        grid-template-columns: 1fr;
        }
        
        .kyc-steps {
        flex-direction: column;
        gap: 2rem;
        }
        
        .kyc-steps::before {
        display: none;
        }
        
        .password-reset-steps {
        flex-direction: column;
        gap: 1.5rem;
        }
        
        .password-reset-steps::before {
        display: none;
        }
        }
        
        @media (max-width: 576px) {
        .section {
        padding: 3rem 5%;
        }
        
        .plans-container, .testimonials-container {
        grid-template-columns: 1fr;
        }
        
        .registration-info, .registration-form, .login-info, .login-form {
        padding: 2rem;
        }
        
        .dashboard-header, .investment-plans-header, .profile-header, .kyc-header, .investment-history-header, .transaction-history-header, .referral-header, .support-header, .admin-header {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
        }
        
        .filters {
        flex-direction: column;
        }
        
        .filter-select {
        min-width: 100%;
        }
        
        .two-factor-code {
        justify-content: center;
        }
        }/* All your CSS styles are preserved exactly as you have them */
    </style>
</head>
<body>
    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loading-spinner">
        <div class="spinner"></div>
        <p>Processing your request...</p>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu-overlay" id="mobile-menu-overlay"></div>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobile-menu">
        <div class="mobile-menu-header">
            <div class="logo">
                <i class="fas fa-gem"></i>
                <span>Raw Wealthy</span>
            </div>
            <button class="close-modal" id="close-mobile-menu">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="mobile-menu-links">
            <a href="#" onclick="app.showPage('home'); app.closeMobileMenu();">
                <i class="fas fa-home"></i> Home
            </a>
            <a href="#" onclick="app.showPage('home'); app.closeMobileMenu();">
                <i class="fas fa-info-circle"></i> About
            </a>
            <a href="#" onclick="app.showPage('investment-plans'); app.closeMobileMenu();">
                <i class="fas fa-chart-line"></i> Raw Materials
            </a>
            <a href="#" onclick="app.showPage('home'); app.closeMobileMenu();">
                <i class="fas fa-cogs"></i> How It Works
            </a>
            <a href="#" onclick="app.showPage('home'); app.closeMobileMenu();">
                <i class="fas fa-comments"></i> Testimonials
            </a>
        </div>
        <div class="mobile-menu-buttons">
            <button class="btn btn-outline" onclick="app.showPage('login'); app.closeMobileMenu();">Login</button>
            <button class="btn btn-primary" onclick="app.showPage('register'); app.closeMobileMenu();">Register</button>
        </div>
    </div>

    <!-- Home Page -->
    <div id="home-page">
        <!-- Navbar -->
        <nav class="navbar">
            <div class="logo">
                <i class="fas fa-gem"></i>
                <span>Raw Wealthy</span>
            </div>
            <div class="nav-links">
                <a href="#" onclick="app.showPage('home')">Home</a>
                <a href="#" onclick="app.showPage('home')">About</a>
                <a href="#" onclick="app.showPage('investment-plans')">Raw Materials</a>
                <a href="#" onclick="app.showPage('home')">How It Works</a>
                <a href="#" onclick="app.showPage('home')">Testimonials</a>
            </div>
            <div class="nav-buttons">
                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="btn btn-outline" onclick="app.showPage('login')">Login</button>
                <button class="btn btn-primary" onclick="app.showPage('register')">Register</button>
            </div>
            <div class="hamburger" id="hamburger">
                <i class="fas fa-bars"></i>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="hero" id="home">
            <div class="hero-content">
                <h1>Invest in Raw Materials. <span class="gradient-text">Earn Daily.</span></h1>
                <p>Join thousands of investors who are growing their wealth with our secure raw materials investment platform. Start with as little as 3,500 and watch your money grow.</p>
                <div class="hero-buttons">
                    <button class="btn btn-primary" onclick="app.showPage('register')">Get Started</button>
                    <button class="btn btn-outline" onclick="app.showPage('investment-plans')">Investment Plans</button>
                </div>
                <div class="hero-stats">
                    <div class="stat">
                        <span class="stat-value" id="total-invested-stat">2.5B+</span>
                        <span class="stat-label">Total Invested</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="active-investors-stat">15,240+</span>
                        <span class="stat-label">Active Investors</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="user-rating-stat">4.9/5</span>
                        <span class="stat-label">User Rating</span>
                    </div>
                </div>
            </div>
            <div class="hero-visual"></div>
        </section>

        <!-- About Section -->
        <section class="section" id="about">
            <div class="section-title">
                <h2>Why Choose Raw Wealthy?</h2>
                <p>We provide a secure and transparent platform for investing in raw materials with industry-leading returns.</p>
            </div>
            <div class="about-content">
                <div class="about-text">
                    <h3>Your Trusted Partner in Raw Materials Investment</h3>
                    <p>With over 7 years of experience in the raw materials industry, we've helped thousands of clients achieve their financial goals through carefully curated investment plans.</p>
                    <p>Our platform uses advanced security measures and follows strict compliance protocols to ensure your investments are safe and secure.</p>
                    <div class="about-features">
                        <div class="feature">
                            <div class="feature-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="feature-content">
                                <h4>Secure Investments</h4>
                                <p>Bank-level security for all transactions</p>
                            </div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="feature-content">
                                <h4>High Returns</h4>
                                <p>Industry-leading ROI on all plans</p>
                            </div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="feature-content">
                                <h4>24/7 Support</h4>
                                <p>Round-the-clock customer service</p>
                            </div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">
                                <i class="fas fa-user-check"></i>
                            </div>
                            <div class="feature-content">
                                <h4>Verified Platform</h4>
                                <p>Fully licensed and regulated</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="about-image">
                    <img src="https://images.unsplash.com/photo-1553877522-43269d4ea984?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" alt="Investment Growth">
                </div>
            </div>
        </section>

        <!-- Raw Materials Plans Section -->
        <section class="section plans" id="plans">
            <div class="section-title">
                <h2>Raw Materials Investment Plans</h2>
                <p>Choose from our carefully curated raw materials investment plans designed to maximize your returns.</p>
            </div>
            <div class="plans-container" id="plans-container">
                <!-- Plans will be dynamically loaded here -->
            </div>
        </section>

        <!-- How It Works Section -->
        <section class="section" id="how-it-works">
            <div class="section-title">
                <h2>How It Works</h2>
                <p>Getting started with Raw Wealthy is simple and straightforward.</p>
            </div>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3 class="step-title">Register</h3>
                    <p class="step-description">Create your account in less than 2 minutes with our simple registration process.</p>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <h3 class="step-title">Invest</h3>
                    <p class="step-description">Choose a raw material investment plan that suits your goals and make your first deposit.</p>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <h3 class="step-title">Earn</h3>
                    <p class="step-description">Watch your investment grow with daily returns that you can withdraw or reinvest.</p>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section class="section testimonials" id="testimonials">
            <div class="section-title">
                <h2>What Our Investors Say</h2>
                <p>Hear from our satisfied investors who have achieved financial success with our platform.</p>
            </div>
            <div class="testimonials-container">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        "I've been investing with Raw Wealthy for over a year now, and the returns have been consistently impressive. The platform is easy to use, and their customer support is excellent."
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Michael Johnson">
                        </div>
                        <div class="author-info">
                            <h4>Michael Johnson</h4>
                            <p>Gold Investor</p>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        "As a beginner in investing, I was hesitant at first. But Raw Wealthy made the process so simple. I started with the Cocoa plan and have already upgraded to Gold. Highly recommended!"
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Sarah Williams">
                        </div>
                        <div class="author-info">
                            <h4>Sarah Williams</h4>
                            <p>Silver Investor</p>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        "The transparency and regular updates on my investments give me peace of mind. I've tried other platforms, but Raw Wealthy stands out with their professionalism and high returns."
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="https://randomuser.me/api/portraits/men/67.jpg" alt="Robert Chen">
                        </div>
                        <div class="author-info">
                            <h4>Robert Chen</h4>
                            <p>Bronze Investor</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer>
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Raw Wealthy</h3>
                    <p>Your trusted partner for secure and high-yield raw materials investment opportunities. Start growing your wealth today.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#" onclick="app.showPage('home')"><i class="fas fa-chevron-right"></i> Home</a></li>
                        <li><a href="#about"><i class="fas fa-chevron-right"></i> About Us</a></li>
                        <li><a href="#" onclick="app.showPage('investment-plans')"><i class="fas fa-chevron-right"></i> Investment Plans</a></li>
                        <li><a href="#how-it-works"><i class="fas fa-chevron-right"></i> How It Works</a></li>
                        <li><a href="#testimonials"><i class="fas fa-chevron-right"></i> Testimonials</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Legal</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Privacy Policy</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Terms of Service</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Cookie Policy</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Disclaimer</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact Us</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-envelope"></i> support@rawwealthy.com</li>
                        <li><i class="fas fa-phone"></i> +234 (0) 812 345 6789</li>
                        <li><i class="fas fa-map-marker-alt"></i> 123 Investment St, Lagos, Nigeria</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 Raw Wealthy Investment Platform. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- Registration Page -->
    <div id="registration-page" class="registration-page" style="display: none;">
        <div class="registration-container">
            <div class="registration-info">
                <h2>Join Thousands of Successful Investors</h2>
                <p>Create your account today and start your journey to financial freedom with our secure and high-yield raw materials investment plans.</p>
                <ul class="info-features">
                    <li><i class="fas fa-check-circle"></i> Secure and encrypted platform</li>
                    <li><i class="fas fa-check-circle"></i> Daily returns on your investments</li>
                    <li><i class="fas fa-check-circle"></i> 24/7 customer support</li>
                    <li><i class="fas fa-check-circle"></i> Multiple withdrawal options</li>
                    <li><i class="fas fa-check-circle"></i> Referral bonus program</li>
                </ul>
            </div>
            <div class="registration-form">
                <div class="form-header">
                    <h2>Create Account</h2>
                    <p>Fill in your details to get started</p>
                </div>
                <form id="registration-form">
                    <div class="form-group">
                        <label for="fullname">Full Name</label>
                        <input type="text" id="fullname" class="form-control" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" class="form-control" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" class="form-control" placeholder="Enter your phone number" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" class="form-control" placeholder="Create a password" required>
                        <button type="button" class="password-toggle" id="password-toggle">
                            <i class="fas fa-eye"></i>
                        </button>
                        <div class="password-strength" id="password-strength"></div>
                    </div>
                    <div class="form-group">
                        <label for="confirm-password">Confirm Password</label>
                        <input type="password" id="confirm-password" class="form-control" placeholder="Confirm your password" required>
                        <button type="button" class="password-toggle" id="confirm-password-toggle">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="form-group">
                        <label for="referral">Referral Code (Optional)</label>
                        <input type="text" id="referral" class="form-control" placeholder="Enter referral code if any">
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;" id="register-btn">
                        <span class="btn-text">Create Account</span>
                        <div class="btn-loading" style="display: none;">
                            <i class="fas fa-spinner fa-spin"></i>
                        </div>
                    </button>
                </form>
                <div class="form-footer">
                    <p>Already have an account? <a href="#" onclick="app.showPage('login')">Login here</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Page -->
    <div id="login-page" class="login-page" style="display: none;">
        <div class="login-container">
            <div class="login-info">
                <h2>Welcome Back!</h2>
                <p>Access your investment dashboard to track your portfolio, view earnings, and manage your investments.</p>
                <ul class="info-features">
                    <li><i class="fas fa-check-circle"></i> Track your investment performance</li>
                    <li><i class="fas fa-check-circle"></i> View real-time earnings</li>
                    <li><i class="fas fa-check-circle"></i> Manage your portfolio</li>
                    <li><i class="fas fa-check-circle"></i> Withdraw your earnings</li>
                    <li><i class="fas fa-check-circle"></i> Access exclusive features</li>
                </ul>
            </div>
            <div class="login-form">
                <div class="login-form-header">
                    <h2>Login to Your Account</h2>
                    <p>Enter your credentials to access your dashboard</p>
                </div>
                <form id="login-form">
                    <div class="form-group">
                        <label for="login-email">Email Address</label>
                        <input type="email" id="login-email" class="form-control" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" class="form-control" placeholder="Enter your password" required>
                        <button type="button" class="password-toggle" id="login-password-toggle">
                            <i class="fas fa-eye"></i>
                        </button>
                        <a href="#" class="forgot-password" onclick="app.openModal('password-reset-modal'); return false;">Forgot Password?</a>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;" id="login-btn">
                        <span class="btn-text">Login</span>
                        <div class="btn-loading" style="display: none;">
                            <i class="fas fa-spinner fa-spin"></i>
                        </div>
                    </button>
                </form>
                <div class="login-form-footer">
                    <p>Don't have an account? <a href="#" onclick="app.showPage('register')">Register here</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboard-page" class="dashboard-page" style="display: none;">
        <div class="dashboard-container">
            <div class="dashboard-header">
                <h1>Dashboard</h1>
                <div class="user-info">
                    <div class="user-avatar" id="user-avatar">JD</div>
                    <div>
                        <div id="user-name">John Doe</div>
                        <div style="color: var(--text-muted); font-size: 0.9rem;" id="user-tier">Standard Investor</div>
                    </div>
                    <button class="btn btn-outline" onclick="app.logout()">Logout</button>
                </div>
            </div>
            <div class="dashboard-content">
                <div class="dashboard-main">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>Total Balance</h3>
                            <div class="value" id="total-balance">0.00</div>
                        </div>
                        <div class="stat-card">
                            <h3>Active Investments</h3>
                            <div class="value" id="active-investments">0.00</div>
                        </div>
                        <div class="stat-card">
                            <h3>Total Earnings</h3>
                            <div class="value" id="total-earnings">0.00</div>
                        </div>
                        <div class="stat-card">
                            <h3>Referral Bonus</h3>
                            <div class="value" id="referral-bonus">0.00</div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <h3>Earnings Overview</h3>
                        <canvas id="earnings-chart"></canvas>
                    </div>
                    <div class="investments-list">
                        <h3>Active Investments</h3>
                        <div id="active-investments-list">
                            <p style="color: var(--text-muted); text-align: center; padding: 2rem;">No active investments</p>
                        </div>
                    </div>
                    <div class="transactions-list">
                        <h3>Recent Transactions</h3>
                        <div id="recent-transactions-list">
                            <p style="color: var(--text-muted); text-align: center; padding: 2rem;">No transactions yet</p>
                        </div>
                    </div>
                </div>
                <div class="dashboard-sidebar">
                    <div class="quick-actions">
                        <div class="action-card" onclick="app.openModal('invest-modal')">
                            <i class="fas fa-plus-circle"></i>
                            <h3>New Investment</h3>
                            <p>Start a new investment plan</p>
                        </div>
                        <div class="action-card" onclick="app.openModal('deposit-modal')">
                            <i class="fas fa-wallet"></i>
                            <h3>Deposit Funds</h3>
                            <p>Add funds to your account</p>
                        </div>
                        <div class="action-card" onclick="app.openModal('withdraw-modal')">
                            <i class="fas fa-money-bill-wave"></i>
                            <h3>Withdraw Funds</h3>
                            <p>Transfer to your bank account</p>
                        </div>
                        <div class="action-card" onclick="app.showPage('referral')">
                            <i class="fas fa-user-friends"></i>
                            <h3>Refer Friends</h3>
                            <p>Earn 15% referral bonus</p>
                        </div>
                        <div class="action-card" onclick="app.showPage('support')">
                            <i class="fas fa-headset"></i>
                            <h3>Support</h3>
                            <p>24/7 customer service</p>
                        </div>
                        <div class="action-card" onclick="app.showPage('profile')">
                            <i class="fas fa-user-cog"></i>
                            <h3>Profile</h3>
                            <p>Manage your account</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Investment Plans Page -->
    <div id="investment-plans-page" class="investment-plans-page" style="display: none;">
        <div class="investment-plans-container">
            <div class="investment-plans-header">
                <h1>Raw Materials Investment Plans</h1>
                <p>Choose the plan that best fits your financial goals</p>
            </div>
            <div class="investment-plans-content">
                <div class="plans-container" id="investment-plans-list">
                    <!-- Plans will be dynamically loaded -->
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Page -->
    <div id="profile-page" class="profile-page" style="display: none;">
        <div class="profile-container">
            <div class="profile-header">
                <h1>Profile Settings</h1>
                <button class="btn btn-primary" onclick="app.showPage('dashboard')">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </div>
            <div class="profile-content">
                <div class="profile-sidebar">
                    <ul class="profile-nav">
                        <li><a href="#" class="active" onclick="app.switchProfileTab('personal')">
                            <i class="fas fa-user"></i> Personal Information
                        </a></li>
                        <li><a href="#" onclick="app.switchProfileTab('security')">
                            <i class="fas fa-shield-alt"></i> Security
                        </a></li>
                        <li><a href="#" onclick="app.switchProfileTab('bank')">
                            <i class="fas fa-university"></i> Bank Details
                        </a></li>
                        <li><a href="#" onclick="app.switchProfileTab('kyc')">
                            <i class="fas fa-id-card"></i> KYC Verification
                        </a></li>
                    </ul>
                </div>
                <div class="profile-main">
                    <!-- Personal Information Tab -->
                    <div class="profile-section" id="personal-tab">
                        <h2>Personal Information</h2>
                        <form id="personal-form">
                            <div class="form-group">
                                <label for="profile-fullname">Full Name</label>
                                <input type="text" id="profile-fullname" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="profile-email">Email Address</label>
                                <input type="email" id="profile-email" class="form-control" readonly>
                            </div>
                            <div class="form-group">
                                <label for="profile-phone">Phone Number</label>
                                <input type="tel" id="profile-phone" class="form-control">
                            </div>
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                        </form>
                    </div>

                    <!-- Security Tab -->
                    <div class="profile-section" id="security-tab" style="display: none;">
                        <h2>Security Settings</h2>
                        <form id="password-change-form">
                            <div class="form-group">
                                <label for="current-password">Current Password</label>
                                <input type="password" id="current-password" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="new-password">New Password</label>
                                <input type="password" id="new-password" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="confirm-new-password">Confirm New Password</label>
                                <input type="password" id="confirm-new-password" class="form-control">
                            </div>
                            <button type="submit" class="btn btn-primary">Change Password</button>
                        </form>
                    </div>

                    <!-- Bank Details Tab -->
                    <div class="profile-section" id="bank-tab" style="display: none;">
                        <h2>Bank Account Details</h2>
                        <form id="bank-form">
                            <div class="form-group">
                                <label for="bank-name">Bank Name</label>
                                <input type="text" id="bank-name" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="account-name">Account Name</label>
                                <input type="text" id="account-name" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="account-number">Account Number</label>
                                <input type="text" id="account-number" class="form-control">
                            </div>
                            <button type="submit" class="btn btn-primary">Save Bank Details</button>
                        </form>
                    </div>

                    <!-- KYC Verification Tab -->
                    <div class="profile-section" id="kyc-tab" style="display: none;">
                        <h2>KYC Verification</h2>
                        <div id="kyc-status">
                            <p>Status: <span id="kyc-status-text" class="status-badge pending">Pending</span></p>
                        </div>
                        <form id="kyc-form">
                            <div class="form-group">
                                <label for="id-type">ID Type</label>
                                <select id="id-type" class="form-control">
                                    <option value="">Select ID Type</option>
                                    <option value="national_id">National ID</option>
                                    <option value="passport">Passport</option>
                                    <option value="driver_license">Driver's License</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="id-number">ID Number</label>
                                <input type="text" id="id-number" class="form-control">
                            </div>
                            <div class="form-group">
                                <label>Upload ID Front</label>
                                <div class="file-upload-container" onclick="document.getElementById('id-front').click()">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Click to upload ID front image</p>
                                    <input type="file" id="id-front" accept="image/*" style="display: none;">
                                </div>
                                <img id="id-front-preview" class="file-preview" src="" alt="ID front preview">
                            </div>
                            <div class="form-group">
                                <label>Upload ID Back</label>
                                <div class="file-upload-container" onclick="document.getElementById('id-back').click()">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Click to upload ID back image</p>
                                    <input type="file" id="id-back" accept="image/*" style="display: none;">
                                </div>
                                <img id="id-back-preview" class="file-preview" src="" alt="ID back preview">
                            </div>
                            <div class="form-group">
                                <label>Upload Selfie with ID</label>
                                <div class="file-upload-container" onclick="document.getElementById('selfie-with-id').click()">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Click to upload selfie with ID</p>
                                    <input type="file" id="selfie-with-id" accept="image/*" style="display: none;">
                                </div>
                                <img id="selfie-with-id-preview" class="file-preview" src="" alt="Selfie with ID preview">
                            </div>
                            <button type="submit" class="btn btn-primary" id="kyc-submit-btn">Submit KYC Application</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Referral Page -->
    <div id="referral-page" class="referral-page" style="display: none;">
        <div class="referral-container">
            <div class="referral-header">
                <h1>Referral Program</h1>
                <p>Earn more by inviting friends to join Raw Wealthy</p>
            </div>
            <div class="referral-content">
                <div class="referral-stats">
                    <h2>Your Referral Stats</h2>
                    <div class="referral-stat">
                        <span>Total Referrals</span>
                        <span id="total-referrals">0</span>
                    </div>
                    <div class="referral-stat">
                        <span>Active Referrals</span>
                        <span id="active-referrals">0</span>
                    </div>
                    <div class="referral-stat">
                        <span>Total Earnings</span>
                        <span style="color: var(--accent-gold);" id="total-referral-earnings">0.00</span>
                    </div>
                </div>
                <div class="referral-links">
                    <h2>Your Referral Link</h2>
                    <div class="form-group">
                        <label>Share this link with friends</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="referral-link" class="form-control" value="" readonly>
                            <button class="btn btn-primary" onclick="app.copyReferralLink()">Copy</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Your Referral Code</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="referral-code" class="form-control" value="" readonly>
                            <button class="btn btn-primary" onclick="app.copyReferralCode()">Copy</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Support Page -->
    <div id="support-page" class="support-page" style="display: none;">
        <div class="support-container">
            <div class="support-header">
                <h1>Help & Support</h1>
                <p>We're here to help you with any questions or issues</p>
            </div>
            <div class="support-content">
                <div class="support-categories">
                    <div class="support-category active" onclick="app.switchSupportCategory('faq')">
                        <i class="fas fa-question-circle"></i> FAQ
                    </div>
                    <div class="support-category" onclick="app.switchSupportCategory('contact')">
                        <i class="fas fa-envelope"></i> Contact Us
                    </div>
                </div>
                <div class="support-main">
                    <!-- FAQ Category -->
                    <div id="faq-category">
                        <h2>Frequently Asked Questions</h2>
                        <div class="faq-item active">
                            <div class="faq-question" onclick="app.toggleFaq(this)">
                                How do I start investing? <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>Register, choose a plan, make deposit, and start earning daily returns.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Contact Category -->
                    <div id="contact-category" style="display: none;">
                        <h2>Contact Our Support Team</h2>
                        <form id="support-form">
                            <div class="form-group">
                                <label for="support-subject">Subject</label>
                                <input type="text" id="support-subject" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="support-message">Message</label>
                                <textarea id="support-message" class="form-control" rows="5"></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Send Message</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Page -->
    <div id="admin-page" class="admin-page" style="display: none;">
        <div class="admin-container">
            <div class="admin-header">
                <h1>Admin Dashboard</h1>
                <div class="user-info">
                    <div class="user-avatar" id="admin-avatar">AD</div>
                    <div>
                        <div id="admin-name">Admin User</div>
                        <div style="color: var(--text-muted); font-size: 0.9rem;">Super Admin</div>
                    </div>
                    <button class="btn btn-outline" onclick="app.logout()">Logout</button>
                </div>
            </div>
            <div class="admin-content">
                <div class="admin-sidebar">
                    <ul class="admin-nav">
                        <li><a href="#" class="active" onclick="app.switchAdminTab('overview')">
                            <i class="fas fa-tachometer-alt"></i> Overview
                        </a></li>
                        <li><a href="#" onclick="app.switchAdminTab('users')">
                            <i class="fas fa-users"></i> Users
                        </a></li>
                        <li><a href="#" onclick="app.switchAdminTab('investments')">
                            <i class="fas fa-chart-line"></i> Investments
                        </a></li>
                        <li><a href="#" onclick="app.switchAdminTab('deposits')">
                            <i class="fas fa-wallet"></i> Deposits
                        </a></li>
                        <li><a href="#" onclick="app.switchAdminTab('withdrawals')">
                            <i class="fas fa-money-bill-wave"></i> Withdrawals
                        </a></li>
                        <li><a href="#" onclick="app.switchAdminTab('kyc')">
                            <i class="fas fa-id-card"></i> KYC
                        </a></li>
                    </ul>
                </div>
                <div class="admin-main">
                    <!-- Overview Tab -->
                    <div id="overview-tab">
                        <h2>Platform Overview</h2>
                        <div class="admin-stats">
                            <div class="admin-stat">
                                <span class="value" id="admin-total-users">0</span>
                                <span class="label">Total Users</span>
                            </div>
                            <div class="admin-stat">
                                <span class="value" id="admin-total-invested">0</span>
                                <span class="label">Total Invested</span>
                            </div>
                            <div class="admin-stat">
                                <span class="value" id="admin-total-withdrawn">0</span>
                                <span class="label">Total Withdrawn</span>
                            </div>
                            <div class="admin-stat">
                                <span class="value" id="admin-pending-requests">0</span>
                                <span class="label">Pending Requests</span>
                            </div>
                        </div>

                        <div class="chart-container">
                            <h3>Platform Growth</h3>
                            <canvas id="platform-growth-chart"></canvas>
                        </div>
                    </div>

                    <!-- Users Tab -->
                    <div id="users-tab" style="display: none;">
                        <h2>User Management</h2>
                        <div style="margin-bottom: 1rem; display: flex; gap: 1rem; align-items: center;">
                            <input type="text" class="form-control" placeholder="Search users..." id="user-search" style="width: 300px;">
                            <button class="btn btn-primary" onclick="app.loadAdminUsers()">
                                <i class="fas fa-search"></i> Search
                            </button>
                            <button class="btn btn-outline" onclick="app.loadAdminUsers()">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Balance</th>
                                        <th>Status</th>
                                        <th>KYC</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="admin-users-table">
                                    <tr>
                                        <td colspan="6" style="text-align: center; padding: 2rem; color: var(--text-muted);">
                                            Loading users...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Investments Tab -->
                    <div id="investments-tab" style="display: none;">
                        <h2>Investment Requests</h2>
                        <div style="margin-bottom: 1rem; display: flex; gap: 1rem; align-items: center;">
                            <select id="investment-status-filter" class="filter-select" style="min-width: 150px;">
                                <option value="pending" selected>Pending</option>
                                <option value="all">All</option>
                                <option value="active">Active</option>
                                <option value="completed">Completed</option>
                            </select>
                            <button class="btn btn-primary" onclick="app.loadAdminInvestments()">
                                <i class="fas fa-filter"></i> Filter
                            </button>
                            <button class="btn btn-outline" onclick="app.loadAdminInvestments()">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>User</th>
                                        <th>Plan</th>
                                        <th>Amount</th>
                                        <th>Date</th>
                                        <th>Status</th>
                                        <th>Proof</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="admin-investments-table">
                                    <tr>
                                        <td colspan="7" style="text-align: center; padding: 2rem; color: var(--text-muted);">
                                            Loading investments...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Deposits Tab - COMPLETELY UPDATED WITH FULL FUNCTIONALITY -->
                    <div id="deposits-tab" style="display: none;">
                        <h2>Deposit Requests</h2>
                        
                        <!-- Filter Controls -->
                        <div style="margin-bottom: 1.5rem; display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
                            <div style="display: flex; gap: 0.5rem; align-items: center;">
                                <label>Status:</label>
                                <select id="deposit-status-filter" class="filter-select" style="min-width: 150px;">
                                    <option value="pending" selected>Pending</option>
                                    <option value="all">All</option>
                                    <option value="approved">Approved</option>
                                    <option value="rejected">Rejected</option>
                                </select>
                            </div>
                            
                            <button class="btn btn-primary" onclick="app.loadAdminDeposits()">
                                <i class="fas fa-filter"></i> Apply Filter
                            </button>
                            
                            <button class="btn btn-outline" onclick="app.loadAdminDeposits()">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                            
                            <div style="margin-left: auto; display: flex; gap: 0.5rem; align-items: center;">
                                <span style="color: var(--text-muted); font-size: 0.9rem;">
                                    Showing: <span id="deposit-count">0</span> deposits
                                </span>
                            </div>
                        </div>
                        
                        <!-- Loading State -->
                        <div id="deposits-loading" style="display: none; text-align: center; padding: 2rem;">
                            <div class="spinner" style="margin: 0 auto;"></div>
                            <p>Loading deposits...</p>
                        </div>
                        
                        <!-- Error State -->
                        <div id="deposits-error" style="display: none; text-align: center; padding: 2rem; color: var(--error);">
                            <i class="fas fa-exclamation-triangle" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                            <p id="deposits-error-message">Error loading deposits</p>
                            <button class="btn btn-outline" onclick="app.loadAdminDeposits()">Retry</button>
                        </div>
                        
                        <!-- Table Container -->
                        <div id="deposits-table-container">
                            <div class="table-responsive">
                                <table class="admin-table">
                                    <thead>
                                        <tr>
                                            <th>User</th>
                                            <th>Amount</th>
                                            <th>Method</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                            <th>Proof</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="admin-deposits-table">
                                        <tr>
                                            <td colspan="7" style="text-align: center; padding: 2rem; color: var(--text-muted);">
                                                No deposit requests found
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Empty State -->
                        <div id="deposits-empty" style="display: none; text-align: center; padding: 2rem; color: var(--text-muted);">
                            <i class="fas fa-inbox" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                            <h3>No Deposits Found</h3>
                            <p>No deposit requests match your filter criteria.</p>
                        </div>
                        
                        <!-- Stats Summary -->
                        <div style="margin-top: 1.5rem; padding: 1rem; background: var(--secondary); border-radius: 8px;">
                            <div style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 1rem;">
                                <div>
                                    <span style="color: var(--text-muted);">Pending: </span>
                                    <span id="deposit-pending-count" style="color: var(--warning); font-weight: 600;">0</span>
                                </div>
                                <div>
                                    <span style="color: var(--text-muted);">Approved: </span>
                                    <span id="deposit-approved-count" style="color: var(--success); font-weight: 600;">0</span>
                                </div>
                                <div>
                                    <span style="color: var(--text-muted);">Rejected: </span>
                                    <span id="deposit-rejected-count" style="color: var(--error); font-weight: 600;">0</span>
                                </div>
                                <div>
                                    <span style="color: var(--text-muted);">Total Value: </span>
                                    <span id="deposit-total-value" style="color: var(--accent-gold); font-weight: 600;">0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Withdrawals Tab -->
                    <div id="withdrawals-tab" style="display: none;">
                        <h2>Withdrawal Requests</h2>
                        <div style="margin-bottom: 1rem; display: flex; gap: 1rem; align-items: center;">
                            <select id="withdrawal-status-filter" class="filter-select" style="min-width: 150px;">
                                <option value="pending" selected>Pending</option>
                                <option value="all">All</option>
                                <option value="paid">Paid</option>
                                <option value="rejected">Rejected</option>
                            </select>
                            <button class="btn btn-primary" onclick="app.loadAdminWithdrawals()">
                                <i class="fas fa-filter"></i> Filter
                            </button>
                            <button class="btn btn-outline" onclick="app.loadAdminWithdrawals()">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>User</th>
                                        <th>Amount</th>
                                        <th>Net Amount</th>
                                        <th>Date</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="admin-withdrawals-table">
                                    <tr>
                                        <td colspan="6" style="text-align: center; padding: 2rem; color: var(--text-muted);">
                                            Loading withdrawals...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- KYC Tab -->
                    <div id="kyc-tab" style="display: none;">
                        <h2>KYC Verification Requests</h2>
                        <div style="margin-bottom: 1rem; display: flex; gap: 1rem; align-items: center;">
                            <select id="kyc-status-filter" class="filter-select" style="min-width: 150px;">
                                <option value="pending" selected>Pending</option>
                                <option value="all">All</option>
                                <option value="approved">Approved</option>
                                <option value="rejected">Rejected</option>
                            </select>
                            <button class="btn btn-primary" onclick="app.loadAdminKYC()">
                                <i class="fas fa-filter"></i> Filter
                            </button>
                            <button class="btn btn-outline" onclick="app.loadAdminKYC()">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>User</th>
                                        <th>ID Type</th>
                                        <th>ID Number</th>
                                        <th>Date</th>
                                        <th>Status</th>
                                        <th>Documents</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="admin-kyc-table">
                                    <tr>
                                        <td colspan="7" style="text-align: center; padding: 2rem; color: var(--text-muted);">
                                            Loading KYC requests...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- User Details Modal -->
    <div id="user-details-modal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2>User Details</h2>
                <button class="close-modal" onclick="app.closeModal('user-details-modal')">&times;</button>
            </div>
            <div id="user-details-content">
                <!-- User details will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Image View Modal -->
    <div id="image-view-modal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2 id="image-view-title">Image Preview</h2>
                <button class="close-modal" onclick="app.closeModal('image-view-modal')">&times;</button>
            </div>
            <div style="text-align: center; padding: 1rem;">
                <img id="image-view-img" src="" alt="Preview" style="max-width: 100%; max-height: 500px; border-radius: 8px;">
            </div>
            <div style="text-align: center; margin-top: 1rem;">
                <a id="image-view-download" href="#" download class="btn btn-primary">
                    <i class="fas fa-download"></i> Download
                </a>
            </div>
        </div>
    </div>

    <!-- Investment Modal -->
    <div id="invest-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Make Investment</h2>
                <button class="close-modal" onclick="app.closeModal('invest-modal')">&times;</button>
            </div>
            <form id="invest-form">
                <div class="form-group">
                    <label for="investment-plan">Select Raw Material</label>
                    <select id="investment-plan" class="form-control">
                        <option value="">Choose a raw material</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="investment-amount">Investment Amount ()</label>
                    <input type="number" id="investment-amount" class="form-control" min="3500">
                </div>
                <div class="form-group">
                    <label>Upload Payment Proof (Required)</label>
                    <div class="file-upload-container" onclick="document.getElementById('investment-proof').click()">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Click to upload payment screenshot</p>
                        <input type="file" id="investment-proof" accept="image/*" style="display: none;">
                    </div>
                    <img id="investment-preview" class="file-preview" src="" alt="Payment proof preview">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Submit Investment Request</button>
            </form>
        </div>
    </div>

    <!-- Deposit Modal -->
    <div id="deposit-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Deposit Funds</h2>
                <button class="close-modal" onclick="app.closeModal('deposit-modal')">&times;</button>
            </div>
            <form id="deposit-form">
                <div class="form-group">
                    <label for="deposit-amount">Amount ()</label>
                    <input type="number" id="deposit-amount" class="form-control" min="500">
                </div>
                <div class="form-group">
                    <label for="deposit-method">Payment Method</label>
                    <select id="deposit-method" class="form-control">
                        <option value="bank_transfer">Bank Transfer</option>
                        <option value="crypto">Cryptocurrency</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Upload Payment Proof (Required)</label>
                    <div class="file-upload-container" onclick="document.getElementById('deposit-proof').click()">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Click to upload payment screenshot</p>
                        <input type="file" id="deposit-proof" accept="image/*" style="display: none;">
                    </div>
                    <img id="deposit-preview" class="file-preview" src="" alt="Payment proof preview">
                </div>
                <div style="background: rgba(16, 185, 129, 0.1); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <h4 style="color: var(--accent-emerald); margin-bottom: 0.5rem;">Bank Details for Transfer</h4>
                    <div style="display: grid; grid-template-columns: 1fr; gap: 0.5rem;">
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-muted);">Bank:</span>
                            <span style="font-weight: 600;">OPay</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-muted);">Account Number:</span>
                            <span style="font-weight: 600;">9162804535</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-muted);">Account Name:</span>
                            <span style="font-weight: 600;">Israel Wycliffe</span>
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Submit Deposit Request</button>
            </form>
        </div>
    </div>

    <!-- Withdraw Modal -->
    <div id="withdraw-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Withdraw Funds</h2>
                <button class="close-modal" onclick="app.closeModal('withdraw-modal')">&times;</button>
            </div>
            <form id="withdraw-form">
                <div class="withdrawal-fee-notice">
                    <i class="fas fa-info-circle"></i>
                    <span>5% platform fee will be deducted from your withdrawal amount</span>
                </div>
                <div class="form-group">
                    <label for="withdraw-amount">Amount ()</label>
                    <input type="number" id="withdraw-amount" class="form-control" min="1000">
                    <small style="color: var(--text-muted);">Available balance: <span id="available-balance">0.00</span></small>
                </div>
                <div class="form-group">
                    <label for="withdraw-method">Withdrawal Method</label>
                    <select id="withdraw-method" class="form-control">
                        <option value="bank_transfer">Bank Transfer</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Request Withdrawal</button>
            </form>
        </div>
    </div>

    <!-- Password Reset Modal -->
    <div id="password-reset-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Reset Your Password</h2>
                <button class="close-modal" onclick="app.closeModal('password-reset-modal')">&times;</button>
            </div>
            <form id="password-reset-form">
                <div class="form-group">
                    <label for="reset-email">Email Address</label>
                    <input type="email" id="reset-email" class="form-control">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Send Reset Code</button>
            </form>
        </div>
    </div>

    <!-- Back to Top Button -->
    <div class="back-to-top" id="back-to-top">
        <i class="fas fa-chevron-up"></i>
    </div>

    <script>// ==================== RAW WEALTHY FRONTEND v100.0 - ULTIMATE PRODUCTION EDITION ====================
const app = {
    // ==================== ENHANCED CONFIGURATION ====================
    config: {
        API_BASE_URL: (() => {
            console.log(' Detecting environment...');
            const hostname = window.location.hostname;
            const origin = window.location.origin;
            
            // Production detection
            if (hostname.includes('rawwealthy.com') || hostname.includes('vercel.app')) {
                const prodUrl = 'https://real-wealthy-1.onrender.com';
                console.log(' Production Environment Detected:', prodUrl);
                return prodUrl;
            }
            
            // Local development
            if (hostname === 'localhost' || hostname === '127.0.0.1') {
                const localUrl = 'http://localhost:10000';
                console.log(' Local Environment Detected:', localUrl);
                return localUrl;
            }
            
            // Default fallback
            console.log(' Using current origin:', origin);
            return origin;
        })(),
        
        VERSION: '100.0.0',
        MIN_INVESTMENT: 3500,
        MIN_DEPOSIT: 500,
        MIN_WITHDRAWAL: 1000,
        PLATFORM_FEE_PERCENT: 5,
        REFERRAL_COMMISSION: 10,
        
        // Debug mode
        DEBUG_MODE: true,
        LOG_API_CALLS: true,
        LOG_ERRORS: true,
        
        // Timeouts
        API_TIMEOUT: 30000,
        LOADING_TIMEOUT: 5000,
        
        // Retry configuration
        MAX_RETRY_ATTEMPTS: 3,
        RETRY_DELAY: 1000
    },

    // ==================== ENHANCED APPLICATION STATE ====================
    state: {
        currentUser: null,
        token: localStorage.getItem('raw_wealthy_token'),
        investmentPlans: [],
        isAdmin: false,
        isAuthenticated: false,
        charts: {},
        pendingRequests: new Map(),
        retryCounts: new Map(),
        lastApiCall: null,
        
        // Debug state
        debug: {
            enabled: true,
            logs: [],
            errors: [],
            apiCalls: []
        }
    },

    // ==================== ENHANCED LOGGING SYSTEM ====================
    log(type, message, data = null) {
        if (!this.config.DEBUG_MODE && type === 'debug') return;
        
        const timestamp = new Date().toISOString();
        const logEntry = { timestamp, type, message, data };
        
        this.state.debug.logs.push(logEntry);
        
        // Keep logs manageable
        if (this.state.debug.logs.length > 1000) {
            this.state.debug.logs.shift();
        }
        
        const colors = {
            debug: '#888',
            info: '#3b82f6',
            success: '#10b981',
            warning: '#f59e0b',
            error: '#ef4444',
            api: '#8b5cf6'
        };
        
        console.log(
            `%c[${timestamp}] %c${type.toUpperCase()}: %c${message}`,
            `color: ${colors[type] || '#888'}`,
            `font-weight: bold; color: ${colors[type] || '#888'}`,
            'color: #333',
            data || ''
        );
        
        // Show toast for errors and important messages
        if (type === 'error' || type === 'success') {
            this.showToast(message, type);
        }
    },

    // ==================== ENHANCED INITIALIZATION ====================
    init() {
        console.log(`
         RAW WEALTHY FRONTEND v${this.config.VERSION} - ULTIMATE EDITION
        =================================================================
         Backend URL: ${this.config.API_BASE_URL}
         Initialized: ${new Date().toISOString()}
         Debug Mode: ${this.config.DEBUG_MODE}
         Token Present: ${!!this.state.token}
        =================================================================
        `);
        
        this.setupEventListeners();
        this.setupPerformanceMonitoring();
        this.checkAuthentication();
        this.loadInvestmentPlans();
        this.initAnimations();
        this.checkReferralFromURL();
        this.initAutoRefresh();
        this.initHealthCheck();
        
        // Initialize theme
        const savedTheme = localStorage.getItem('theme') || 'dark';
        this.applyTheme(savedTheme);
        
        this.log('info', 'Application initialized successfully');
    },

    // ==================== ENHANCED EVENT LISTENERS ====================
    setupEventListeners() {
        try {
            // Theme toggle
            const themeToggle = document.getElementById('theme-toggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', () => this.toggleTheme());
            }
            
            // Mobile menu
            const hamburger = document.getElementById('hamburger');
            if (hamburger) {
                hamburger.addEventListener('click', () => this.openMobileMenu());
            }
            
            const closeMobileMenu = document.getElementById('close-mobile-menu');
            if (closeMobileMenu) {
                closeMobileMenu.addEventListener('click', () => this.closeMobileMenu());
            }
            
            const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
            if (mobileMenuOverlay) {
                mobileMenuOverlay.addEventListener('click', () => this.closeMobileMenu());
            }
            
            // Back to top
            const backToTop = document.getElementById('back-to-top');
            if (backToTop) {
                backToTop.addEventListener('click', () => this.scrollToTop());
            }
            
            // Form submissions with validation
            this.setupFormListeners();
            
            // Password toggles
            this.initPasswordToggles();
            
            // File upload previews
            this.initFileUploadPreviews();
            
            // Scroll event for navbar
            window.addEventListener('scroll', () => this.handleScroll());
            
            // Investment amount calculation
            const investmentAmount = document.getElementById('investment-amount');
            if (investmentAmount) {
                investmentAmount.addEventListener('input', () => this.calculateInvestmentInterest());
            }
            
            // Withdrawal amount calculation
            const withdrawAmount = document.getElementById('withdraw-amount');
            if (withdrawAmount) {
                withdrawAmount.addEventListener('input', () => this.updateWithdrawalFee());
            }
            
            // Auto-scroll to top when page changes
            window.addEventListener('hashchange', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', (event) => {
                if (event.target.classList.contains('modal')) {
                    this.closeModal(event.target.id);
                }
            });
            
            // Smooth scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                });
            });
            
            // Before unload confirmation
            window.addEventListener('beforeunload', (e) => {
                if (this.state.pendingRequests.size > 0) {
                    e.preventDefault();
                    e.returnValue = 'You have pending requests. Are you sure you want to leave?';
                }
            });
            
            this.log('debug', 'Event listeners setup completed');
        } catch (error) {
            this.log('error', 'Failed to setup event listeners', error);
        }
    },

    setupFormListeners() {
        const forms = [
            { id: 'registration-form', handler: (e) => this.handleRegistration(e) },
            { id: 'login-form', handler: (e) => this.handleLogin(e) },
            { id: 'invest-form', handler: (e) => this.handleInvestment(e) },
            { id: 'deposit-form', handler: (e) => this.handleDeposit(e) },
            { id: 'withdraw-form', handler: (e) => this.handleWithdrawal(e) },
            { id: 'personal-form', handler: (e) => this.handleProfileUpdate(e) },
            { id: 'bank-form', handler: (e) => this.handleBankUpdate(e) },
            { id: 'kyc-form', handler: (e) => this.handleKYCSubmission(e) },
            { id: 'support-form', handler: (e) => this.handleSupportRequest(e) },
            { id: 'password-reset-form', handler: (e) => this.handlePasswordReset(e) },
            { id: 'password-change-form', handler: (e) => this.handlePasswordChange(e) }
        ];
        
        forms.forEach(({ id, handler }) => {
            const form = document.getElementById(id);
            if (form) {
                form.addEventListener('submit', handler);
            }
        });
    },

    // ==================== ENHANCED API REQUEST HANDLER ====================
    async apiRequest(endpoint, options = {}) {
        const requestId = Math.random().toString(36).substring(7);
        const url = this.config.API_BASE_URL + endpoint;
        
        const headers = {
            'Content-Type': 'application/json',
            'X-Request-ID': requestId,
            'X-Client-Version': this.config.VERSION,
            'X-Timestamp': Date.now(),
            ...options.headers
        };

        if (this.state.token) {
            headers['Authorization'] = `Bearer ${this.state.token}`;
        }

        const config = {
            method: options.method || 'GET',
            headers: headers,
            signal: AbortSignal.timeout(this.config.API_TIMEOUT),
            ...options
        };

        if (options.body instanceof FormData) {
            delete config.headers['Content-Type'];
            config.body = options.body;
        } else if (options.body && typeof options.body === 'object') {
            config.body = JSON.stringify(options.body);
        }

        // Track pending requests
        this.state.pendingRequests.set(requestId, {
            endpoint,
            method: config.method,
            startedAt: Date.now()
        });

        try {
            this.log('api', ` ${config.method} ${endpoint}`, {
                requestId,
                hasBody: !!config.body,
                hasToken: !!this.state.token
            });

            this.showLoadingSpinner(true);
            const startTime = Date.now();
            
            const response = await fetch(url, config);
            const responseTime = Date.now() - startTime;
            
            let data;
            try {
                data = await response.json();
            } catch (parseError) {
                throw new Error(`Invalid JSON response: ${parseError.message}`);
            }
            
            this.log('api', ` ${response.status} ${endpoint} (${responseTime}ms)`, {
                requestId,
                success: data.success,
                responseTime
            });

            if (!response.ok) {
                const errorMessage = data.message || `HTTP ${response.status}`;
                this.log('error', `API Error: ${errorMessage}`, {
                    endpoint,
                    status: response.status,
                    requestId
                });
                
                // Handle specific status codes
                if (response.status === 401) {
                    this.handleTokenExpired();
                    throw new Error('Authentication required');
                } else if (response.status === 403) {
                    throw new Error('Access denied');
                } else if (response.status === 404) {
                    throw new Error('Endpoint not found');
                } else if (response.status >= 500) {
                    throw new Error('Server error, please try again later');
                }
                
                throw new Error(errorMessage);
            }

            if (!data.success && data.message) {
                this.log('warning', `API Warning: ${data.message}`, data);
                throw new Error(data.message);
            }

            // Record successful API call
            this.state.lastApiCall = {
                endpoint,
                method: config.method,
                timestamp: new Date(),
                responseTime,
                success: true
            };

            return data;
        } catch (error) {
            this.log('error', `API Request Failed: ${error.message}`, {
                endpoint,
                requestId,
                error: error.name
            });
            
            // Retry logic for network errors
            if (error.name === 'TimeoutError' || error.name === 'TypeError') {
                return this.retryRequest(requestId, endpoint, config);
            }
            
            throw error;
        } finally {
            this.state.pendingRequests.delete(requestId);
            this.showLoadingSpinner(false);
        }
    },

    async retryRequest(requestId, endpoint, config) {
        const retryCount = this.state.retryCounts.get(requestId) || 0;
        
        if (retryCount >= this.config.MAX_RETRY_ATTEMPTS) {
            this.state.retryCounts.delete(requestId);
            throw new Error(`Request failed after ${this.config.MAX_RETRY_ATTEMPTS} retries`);
        }
        
        this.state.retryCounts.set(requestId, retryCount + 1);
        this.log('warning', `Retrying request (${retryCount + 1}/${this.config.MAX_RETRY_ATTEMPTS})`, {
            endpoint,
            requestId
        });
        
        await this.delay(this.config.RETRY_DELAY * (retryCount + 1));
        
        return this.apiRequest(endpoint, {
            method: config.method,
            headers: config.headers,
            body: config.body
        });
    },

    delay(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    },

    // ==================== ENHANCED AUTHENTICATION FUNCTIONS ====================
    checkAuthentication() {
        this.log('debug', 'Checking authentication status');
        
        if (this.state.token) {
            this.verifyToken();
        } else {
            this.showPage('home');
        }
    },

    async verifyToken() {
        try {
            this.log('debug', 'Verifying token validity');
            const response = await this.apiRequest('/api/profile');
            
            this.state.currentUser = response.data.user;
            this.state.isAdmin = this.state.currentUser.role === 'admin' || this.state.currentUser.role === 'super_admin';
            this.state.isAuthenticated = true;

            // Update user avatar with fallback
            const initials = this.getUserInitials(this.state.currentUser.full_name);
            this.updateAvatar('user-avatar', initials);
            this.updateAvatar('admin-avatar', initials.substring(0, 2));

            if (this.state.isAdmin) {
                this.showPage('admin');
                this.log('info', 'Admin user logged in');
            } else {
                this.showPage('dashboard');
                this.log('info', 'Regular user logged in');
            }
        } catch (error) {
            this.log('error', 'Token verification failed', error);
            this.handleTokenExpired();
        }
    },

    getUserInitials(fullName) {
        if (!fullName) return 'U';
        return fullName
            .split(' ')
            .map(n => n[0])
            .join('')
            .toUpperCase()
            .substring(0, 2);
    },

    updateAvatar(elementId, initials) {
        const element = document.getElementById(elementId);
        if (element) {
            element.textContent = initials;
        }
    },

    handleTokenExpired() {
        this.log('warning', 'Token expired or invalid');
        localStorage.removeItem('raw_wealthy_token');
        this.state.token = null;
        this.state.currentUser = null;
        this.state.isAuthenticated = false;
        this.showToast('Your session has expired. Please login again.', 'warning');
        this.showPage('login');
    },

    // ==================== ENHANCED PAGE NAVIGATION ====================
    showPage(page) {
        this.log('debug', `Navigating to page: ${page}`);
        
        const pages = [
            'home-page', 'registration-page', 'login-page', 'dashboard-page',
            'investment-plans-page', 'profile-page', 'referral-page',
            'support-page', 'admin-page'
        ];

        // Hide all pages
        pages.forEach(pageId => {
            const element = document.getElementById(pageId);
            if (element) {
                element.style.display = 'none';
            }
        });

        // Show target page
        switch(page) {
            case 'home':
                this.showElement('home-page', 'block');
                this.updateHomeStats();
                break;
            case 'register':
                this.showElement('registration-page', 'flex');
                break;
            case 'login':
                this.showElement('login-page', 'flex');
                break;
            case 'dashboard':
                this.showElement('dashboard-page', 'flex');
                this.updateDashboard();
                break;
            case 'investment-plans':
                this.showElement('investment-plans-page', 'flex');
                this.loadInvestmentPlansPage();
                break;
            case 'profile':
                this.showElement('profile-page', 'flex');
                this.loadProfileData();
                break;
            case 'referral':
                this.showElement('referral-page', 'flex');
                this.loadReferralData();
                break;
            case 'support':
                this.showElement('support-page', 'flex');
                break;
            case 'admin':
                this.showElement('admin-page', 'flex');
                this.updateAdminDashboard();
                break;
        }

        this.closeMobileMenu();
        this.log('debug', `Page navigation complete: ${page}`);
    },

    showElement(elementId, display = 'block') {
        const element = document.getElementById(elementId);
        if (element) {
            element.style.display = display;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    },

    // ==================== ENHANCED REGISTRATION ====================
    async handleRegistration(e) {
        e.preventDefault();
        this.log('info', 'Processing registration');

        const formData = {
            full_name: this.getValue('fullname'),
            email: this.getValue('email').toLowerCase(),
            phone: this.getValue('phone'),
            password: this.getValue('password'),
            referral_code: this.getValue('referral').toUpperCase() || undefined
        };

        // Enhanced validation
        const validation = this.validateRegistration(formData);
        if (!validation.valid) {
            this.showToast(validation.message, 'error');
            return;
        }

        this.setLoadingState('register-btn', true);

        try {
            const response = await this.apiRequest('/api/auth/register', {
                method: 'POST',
                body: formData
            });

            this.state.token = response.data.token;
            this.state.currentUser = response.data.user;
            localStorage.setItem('raw_wealthy_token', response.data.token);

            this.showToast('Registration successful! Welcome to Raw Wealthy.', 'success');
            this.log('success', 'User registered successfully', {
                email: formData.email,
                userId: response.data.user._id
            });

            setTimeout(() => {
                this.showPage('dashboard');
            }, 1500);
        } catch (error) {
            this.log('error', 'Registration failed', error);
        } finally {
            this.setLoadingState('register-btn', false);
        }
    },

    validateRegistration(data) {
        if (!data.full_name || data.full_name.length < 2) {
            return { valid: false, message: 'Full name must be at least 2 characters' };
        }
        
        if (!this.isValidEmail(data.email)) {
            return { valid: false, message: 'Invalid email address' };
        }
        
        if (!data.phone || data.phone.length < 10) {
            return { valid: false, message: 'Valid phone number required' };
        }
        
        if (!data.password || data.password.length < 6) {
            return { valid: false, message: 'Password must be at least 6 characters' };
        }
        
        if (data.password !== this.getValue('confirm-password')) {
            return { valid: false, message: 'Passwords do not match' };
        }
        
        return { valid: true, message: 'Validation passed' };
    },

    // ==================== ENHANCED LOGIN ====================
    async handleLogin(e) {
        e.preventDefault();
        this.log('info', 'Processing login');

        const formData = {
            email: this.getValue('login-email').toLowerCase(),
            password: this.getValue('login-password')
        };

        if (!formData.email || !formData.password) {
            this.showToast('Please enter email and password', 'error');
            return;
        }

        this.setLoadingState('login-btn', true);

        try {
            const response = await this.apiRequest('/api/auth/login', {
                method: 'POST',
                body: formData
            });

            this.state.token = response.data.token;
            this.state.currentUser = response.data.user;
            this.state.isAdmin = this.state.currentUser.role === 'admin' || this.state.currentUser.role === 'super_admin';
            localStorage.setItem('raw_wealthy_token', response.data.token);

            this.showToast('Login successful!', 'success');
            this.log('success', 'User logged in', {
                email: formData.email,
                role: this.state.currentUser.role
            });

            setTimeout(() => {
                if (this.state.isAdmin) {
                    this.showPage('admin');
                } else {
                    this.showPage('dashboard');
                }
            }, 1000);
        } catch (error) {
            this.log('error', 'Login failed', error);
        } finally {
            this.setLoadingState('login-btn', false);
        }
    },

    // ==================== ENHANCED DASHBOARD FUNCTIONS ====================
    async updateDashboard() {
        if (!this.state.currentUser) {
            this.log('warning', 'No user found for dashboard update');
            return;
        }

        try {
            this.log('debug', 'Updating dashboard data');
            const response = await this.apiRequest('/api/profile');
            const dashboardData = response.data;

            // Update user info with null checks
            this.updateUserInfo(dashboardData.user);
            
            // Update financial stats
            this.updateDashboardStats(dashboardData.dashboard_stats);
            
            // Load investments and transactions
            await Promise.all([
                this.loadUserInvestments(),
                this.loadUserTransactions()
            ]);

            // Update earnings chart
            this.createEarningsChart(dashboardData.transaction_history || []);

            this.log('success', 'Dashboard updated successfully');
        } catch (error) {
            this.log('error', 'Failed to update dashboard', error);
        }
    },

    updateUserInfo(user) {
        if (!user) return;
        
        this.setTextContent('user-name', user.full_name || 'User');
        this.setTextContent('user-tier', user.kyc_verified ? 'Verified Investor' : 'Standard Investor');
        
        const initials = this.getUserInitials(user.full_name);
        this.updateAvatar('user-avatar', initials);
    },

    updateDashboardStats(stats) {
        if (!stats) return;
        
        this.updateCurrencyDisplay('total-balance', stats.available_balance || 0);
        this.updateCurrencyDisplay('active-investments', stats.active_investment_value || 0);
        this.updateCurrencyDisplay('total-earnings', stats.total_earnings || 0);
        this.updateCurrencyDisplay('referral-bonus', stats.referral_earnings || 0);
    },

    updateCurrencyDisplay(elementId, amount) {
        const element = document.getElementById(elementId);
        if (element) {
            element.textContent = this.formatCurrency(amount);
        }
    },

    formatCurrency(amount) {
        return `${parseFloat(amount || 0).toLocaleString('en-US', {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2
        })}`;
    },

    // ==================== ENHANCED INVESTMENT PLANS ====================
    async loadInvestmentPlans() {
        try {
            this.log('debug', 'Loading investment plans');
            const response = await this.apiRequest('/api/plans');
            this.state.investmentPlans = response.data.plans || [];
            
            if (this.state.investmentPlans.length === 0) {
                this.log('warning', 'No investment plans found, using defaults');
                this.state.investmentPlans = this.getDefaultPlans();
            }
            
            this.renderInvestmentPlans();
            this.log('success', `Loaded ${this.state.investmentPlans.length} investment plans`);
        } catch (error) {
            this.log('error', 'Failed to load investment plans', error);
            this.state.investmentPlans = this.getDefaultPlans();
            this.renderInvestmentPlans();
        }
    },

    getDefaultPlans() {
        return [
            {
                _id: 'default-1',
                name: 'Cocoa Beans',
                description: 'Invest in premium cocoa beans with stable returns',
                min_amount: 3500,
                daily_interest: 2.5,
                total_interest: 75,
                duration: 30,
                risk_level: 'low',
                is_popular: true,
                color: '#10b981',
                icon: ''
            },
            {
                _id: 'default-2',
                name: 'Gold',
                description: 'Precious metal investment with high liquidity',
                min_amount: 50000,
                daily_interest: 3.2,
                total_interest: 96,
                duration: 30,
                risk_level: 'medium',
                is_popular: true,
                color: '#f59e0b',
                icon: ''
            },
            {
                _id: 'default-3',
                name: 'Crude Oil',
                description: 'Energy sector investment with premium returns',
                min_amount: 100000,
                daily_interest: 4.1,
                total_interest: 123,
                duration: 30,
                risk_level: 'high',
                color: '#dc2626',
                icon: ''
            }
        ];
    },

    // ==================== ENHANCED ADMIN DASHBOARD - COMPLETE INTEGRATION ====================
    async updateAdminDashboard() {
        if (!this.state.isAdmin) {
            this.log('warning', 'Non-admin user attempted to access admin dashboard');
            this.showPage('dashboard');
            return;
        }

        try {
            this.log('info', 'Loading admin dashboard data');
            
            const [dashboardResponse, depositsResponse] = await Promise.all([
                this.apiRequest('/api/admin/dashboard'),
                this.apiRequest('/api/admin/pending-deposits')
            ]);

            // Update admin stats
            this.updateAdminStats(dashboardResponse.data.stats);
            
            // Update admin name
            this.setTextContent('admin-name', this.state.currentUser?.full_name || 'Admin');
            
            // Update charts
            this.createAdminChart(dashboardResponse.data);
            
            // Load all admin sections
            await Promise.all([
                this.loadAdminUsers(),
                this.loadAdminInvestments(),
                this.loadAdminWithdrawals(),
                this.loadAdminKYC()
            ]);

            this.log('success', 'Admin dashboard updated successfully');
        } catch (error) {
            this.log('error', 'Failed to update admin dashboard', error);
            this.showToast('Failed to load admin dashboard data', 'error');
        }
    },

    updateAdminStats(stats) {
        if (!stats) return;
        
        this.setTextContent('admin-total-users', stats.overview?.total_users || 0);
        this.updateCurrencyDisplay('admin-total-invested', stats.overview?.active_investment_value || 0);
        this.updateCurrencyDisplay('admin-total-withdrawn', stats.overview?.total_withdrawals || 0);
        
        const pendingRequests = 
            (stats.pending_actions?.pending_deposits || 0) + 
            (stats.pending_actions?.pending_withdrawals || 0) + 
            (stats.pending_actions?.pending_kyc || 0);
        
        this.setTextContent('admin-pending-requests', pendingRequests);
    },

    // ==================== ENHANCED ADMIN DEPOSITS - FULLY INTEGRATED ====================
    async loadAdminDeposits() {
        console.log(' [ADMIN DEPOSITS] Starting load process...');
        
        // Show loading state
        this.showAdminLoading('deposits');
        
        try {
            // Get filter value
            const filterElement = document.getElementById('deposit-status-filter');
            const status = filterElement ? filterElement.value : 'pending';
            
            console.log(` [ADMIN DEPOSITS] Filter status: ${status}`);
            
            // Make API call
            const response = await this.apiRequest('/api/admin/pending-deposits');
            console.log(' [ADMIN DEPOSITS] API Response received:', response);
            
            if (!response.data) {
                throw new Error('No data received from server');
            }
            
            let deposits = response.data.deposits || [];
            console.log(` [ADMIN DEPOSITS] Total deposits: ${deposits.length}`);
            
            // Filter by status if not "all"
            if (status !== 'all') {
                deposits = deposits.filter(deposit => deposit.status === status);
                console.log(` [ADMIN DEPOSITS] Filtered to ${deposits.length} ${status} deposits`);
            }
            
            // Update counts
            this.updateDepositStats(deposits);
            
            // Show empty state if no deposits
            if (deposits.length === 0) {
                this.showAdminEmpty('deposits', `No ${status} deposit requests found`);
                return;
            }
            
            // Render the table
            this.renderAdminDepositsTable(deposits);
            
            console.log(' [ADMIN DEPOSITS] Load completed successfully');
        } catch (error) {
            console.error(' [ADMIN DEPOSITS] Load error:', error);
            this.showAdminError('deposits', error.message || 'Failed to load deposits');
            this.log('error', 'Admin deposits load failed', error);
        }
    },

    renderAdminDepositsTable(deposits) {
        const table = document.getElementById('admin-deposits-table');
        if (!table) {
            console.error(' Table element not found: admin-deposits-table');
            return;
        }
        
        table.innerHTML = deposits.map(deposit => {
            // Safely extract user data with fallbacks
            const user = deposit.user_details || deposit.user || {};
            const userName = user.full_name || user.name || 'Unknown User';
            const userEmail = user.email || 'No email';
            const userPhone = user.phone || 'No phone';
            const amount = deposit.amount || 0;
            const status = deposit.status || 'pending';
            const proofUrl = deposit.payment_proof_url || deposit.proof_url;
            const date = deposit.createdAt ? new Date(deposit.createdAt).toLocaleDateString() : 'N/A';
            const method = deposit.payment_method || 'bank_transfer';
            const reference = deposit.reference || deposit._id || 'N/A';
            
            return `
                <tr>
                    <td>
                        <div><strong>${this.escapeHtml(userName)}</strong></div>
                        <small style="color: var(--text-muted);">${this.escapeHtml(userEmail)}</small>
                        <br>
                        <small style="color: var(--text-muted);">${this.escapeHtml(userPhone)}</small>
                    </td>
                    <td style="font-weight: 600; color: var(--accent-emerald);">
                        ${this.formatCurrency(amount)}
                    </td>
                    <td>
                        <span class="status-badge ${method === 'bank_transfer' ? 'approved' : 'pending'}">
                            ${method.toUpperCase()}
                        </span>
                    </td>
                    <td>${date}</td>
                    <td>
                        <span class="status-badge ${status}">
                            ${status.toUpperCase()}
                        </span>
                    </td>
                    <td>
                        ${proofUrl ? 
                            `<button class="btn btn-outline" 
                                    style="padding: 0.3rem 0.8rem; font-size: 0.8rem;"
                                    onclick="app.viewImage('${this.escapeHtml(proofUrl)}', 'Payment Proof - ${this.escapeHtml(reference)}')">
                                <i class="fas fa-eye"></i> View Proof
                            </button>` 
                            : '<span style="color: var(--text-muted);">No proof</span>'
                        }
                    </td>
                    <td>
                        ${status === 'pending' ? `
                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                                <button class="btn btn-outline" 
                                        style="padding: 0.3rem 0.8rem; font-size: 0.8rem;"
                                        onclick="app.approveDeposit('${deposit._id}')">
                                    <i class="fas fa-check"></i> Approve
                                </button>
                                <button class="btn btn-outline" 
                                        style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background: var(--error); color: white;"
                                        onclick="app.rejectDeposit('${deposit._id}')">
                                    <i class="fas fa-times"></i> Reject
                                </button>
                            </div>
                        ` : `
                            <span style="color: var(--text-muted); font-size: 0.9rem;">
                                ${deposit.approved_at ? 
                                    `Processed ${new Date(deposit.approved_at).toLocaleDateString()}` : 
                                    'Processed'}
                            </span>
                        `}
                    </td>
                </tr>
            `;
        }).join('');
        
        // Show the table
        this.showAdminContent('deposits');
    },

    // ==================== ADMIN APPROVAL FUNCTIONS ====================
    async approveDeposit(depositId) {
        if (!confirm('Are you sure you want to approve this deposit?')) {
            return;
        }

        try {
            this.log('info', `Approving deposit: ${depositId}`);
            
            const remarks = prompt('Enter approval remarks (optional):');
            
            await this.apiRequest(`/api/admin/deposits/${depositId}/approve`, {
                method: 'POST',
                body: remarks ? { remarks } : {}
            });

            this.showToast('Deposit approved successfully!', 'success');
            this.log('success', `Deposit ${depositId} approved`);
            
            // Reload deposits
            setTimeout(() => this.loadAdminDeposits(), 500);
        } catch (error) {
            this.log('error', `Failed to approve deposit: ${depositId}`, error);
            this.showToast(error.message || 'Failed to approve deposit', 'error');
        }
    },

    async rejectDeposit(depositId) {
        const reason = prompt('Enter rejection reason (required):');
        if (!reason) {
            this.showToast('Rejection reason is required', 'warning');
            return;
        }

        try {
            this.log('info', `Rejecting deposit: ${depositId}`, { reason });
            
            await this.apiRequest(`/api/admin/deposits/${depositId}/reject`, {
                method: 'POST',
                body: { remarks: reason }
            });

            this.showToast('Deposit rejected!', 'success');
            this.log('success', `Deposit ${depositId} rejected`);
            
            // Reload deposits
            setTimeout(() => this.loadAdminDeposits(), 500);
        } catch (error) {
            this.log('error', `Failed to reject deposit: ${depositId}`, error);
            this.showToast(error.message || 'Failed to reject deposit', 'error');
        }
    },

    // ==================== ENHANCED UTILITY FUNCTIONS ====================
    escapeHtml(text) {
        if (!text) return '';
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    },

    getValue(elementId) {
        const element = document.getElementById(elementId);
        return element ? element.value.trim() : '';
    },

    setTextContent(elementId, text) {
        const element = document.getElementById(elementId);
        if (element) {
            element.textContent = text || '';
        }
    },

    isValidEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
    },

    // ==================== ENHANCED UI MANAGEMENT ====================
    showAdminLoading(section) {
        const elements = {
            loading: document.getElementById(`${section}-loading`),
            error: document.getElementById(`${section}-error`),
            empty: document.getElementById(`${section}-empty`),
            container: document.getElementById(`${section}-table-container`)
        };
        
        Object.entries(elements).forEach(([key, element]) => {
            if (element) {
                element.style.display = key === 'loading' ? 'block' : 'none';
            }
        });
    },

    showAdminError(section, message) {
        const elements = {
            loading: document.getElementById(`${section}-loading`),
            error: document.getElementById(`${section}-error`),
            empty: document.getElementById(`${section}-empty`),
            container: document.getElementById(`${section}-table-container`)
        };
        
        elements.loading && (elements.loading.style.display = 'none');
        elements.container && (elements.container.style.display = 'none');
        elements.empty && (elements.empty.style.display = 'none');
        
        if (elements.error) {
            elements.error.style.display = 'block';
            const errorMsg = elements.error.querySelector('#deposits-error-message');
            if (errorMsg && message) {
                errorMsg.textContent = message;
            }
        }
    },

    showAdminEmpty(section, message) {
        const elements = {
            loading: document.getElementById(`${section}-loading`),
            error: document.getElementById(`${section}-error`),
            empty: document.getElementById(`${section}-empty`),
            container: document.getElementById(`${section}-table-container`)
        };
        
        elements.loading && (elements.loading.style.display = 'none');
        elements.error && (elements.error.style.display = 'none');
        elements.container && (elements.container.style.display = 'none');
        
        if (elements.empty) {
            elements.empty.style.display = 'block';
            if (message) {
                const msgElement = elements.empty.querySelector('p');
                if (msgElement) {
                    msgElement.textContent = message;
                }
            }
        }
    },

    showAdminContent(section) {
        const elements = {
            loading: document.getElementById(`${section}-loading`),
            error: document.getElementById(`${section}-error`),
            empty: document.getElementById(`${section}-empty`),
            container: document.getElementById(`${section}-table-container`)
        };
        
        elements.loading && (elements.loading.style.display = 'none');
        elements.error && (elements.error.style.display = 'none');
        elements.empty && (elements.empty.style.display = 'none');
        elements.container && (elements.container.style.display = 'block');
    },

    // ==================== ENHANCED ERROR HANDLING ====================
    handleApiError(error, context) {
        this.log('error', `API Error in ${context}`, {
            message: error.message,
            stack: error.stack,
            timestamp: new Date().toISOString()
        });
        
        this.showToast(error.message || 'An error occurred', 'error');
    },

    // ==================== PERFORMANCE MONITORING ====================
    setupPerformanceMonitoring() {
        // Monitor API performance
        const originalApiRequest = this.apiRequest;
        this.apiRequest = async function(...args) {
            const start = performance.now();
            try {
                return await originalApiRequest.apply(this, args);
            } finally {
                const duration = performance.now() - start;
                this.log('debug', `API call took ${duration.toFixed(2)}ms`, {
                    endpoint: args[0],
                    duration: duration
                });
            }
        }.bind(this);
    },

    // ==================== AUTO-REFRESH SYSTEM ====================
    initAutoRefresh() {
        // Auto-refresh dashboard every 30 seconds if on dashboard
        setInterval(() => {
            if (this.state.isAuthenticated && document.getElementById('dashboard-page').style.display === 'flex') {
                this.updateDashboard();
            }
        }, 30000);
    },

    // ==================== HEALTH CHECK SYSTEM ====================
    async initHealthCheck() {
        try {
            const response = await fetch(`${this.config.API_BASE_URL}/health`);
            const health = await response.json();
            
            if (health.status === 'OK') {
                this.log('success', 'Backend health check passed', health);
            } else {
                this.log('warning', 'Backend health check warning', health);
            }
        } catch (error) {
            this.log('error', 'Backend health check failed', error);
        }
    },

    // ==================== COMPLETE UI FUNCTIONS ====================
    toggleTheme() {
        const body = document.body;
        const icon = document.querySelector('#theme-toggle i');
        
        if (body.classList.contains('light-mode')) {
            body.classList.remove('light-mode');
            icon.classList.remove('fa-sun');
            icon.classList.add('fa-moon');
            localStorage.setItem('theme', 'dark');
            this.log('debug', 'Switched to dark theme');
        } else {
            body.classList.add('light-mode');
            icon.classList.remove('fa-moon');
            icon.classList.add('fa-sun');
            localStorage.setItem('theme', 'light');
            this.log('debug', 'Switched to light theme');
        }
    },

    applyTheme(theme) {
        const body = document.body;
        const icon = document.querySelector('#theme-toggle i');
        
        if (theme === 'light') {
            body.classList.add('light-mode');
            icon.classList.remove('fa-moon');
            icon.classList.add('fa-sun');
        } else {
            body.classList.remove('light-mode');
            icon.classList.remove('fa-sun');
            icon.classList.add('fa-moon');
        }
    },

    openMobileMenu() {
        document.getElementById('mobile-menu').classList.add('active');
        document.getElementById('mobile-menu-overlay').classList.add('active');
        document.body.style.overflow = 'hidden';
    },

    closeMobileMenu() {
        document.getElementById('mobile-menu').classList.remove('active');
        document.getElementById('mobile-menu-overlay').classList.remove('active');
        document.body.style.overflow = 'auto';
    },

    handleScroll() {
        const navbar = document.querySelector('.navbar');
        const backToTop = document.getElementById('back-to-top');
        
        if (navbar && window.scrollY > 50) {
            navbar.classList.add('scrolled');
        } else if (navbar) {
            navbar.classList.remove('scrolled');
        }
        
        if (backToTop && window.scrollY > 300) {
            backToTop.classList.add('visible');
        } else if (backToTop) {
            backToTop.classList.remove('visible');
        }
    },

    scrollToTop() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    },

    setLoadingState(buttonId, isLoading) {
        const button = document.getElementById(buttonId);
        if (!button) return;
        
        const buttonText = button.querySelector('.btn-text');
        const buttonLoading = button.querySelector('.btn-loading');
        
        if (isLoading) {
            button.disabled = true;
            if (buttonText) buttonText.style.display = 'none';
            if (buttonLoading) buttonLoading.style.display = 'block';
        } else {
            button.disabled = false;
            if (buttonText) buttonText.style.display = 'block';
            if (buttonLoading) buttonLoading.style.display = 'none';
        }
    },

    showLoadingSpinner(show) {
        const spinner = document.getElementById('loading-spinner');
        if (spinner) {
            spinner.style.display = show ? 'flex' : 'none';
        }
    },

    showToast(message, type = 'info') {
        const container = document.getElementById('toast-container');
        if (!container) return;
        
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        
        let icon = 'info-circle';
        if (type === 'success') icon = 'check-circle';
        else if (type === 'error') icon = 'exclamation-circle';
        else if (type === 'warning') icon = 'exclamation-triangle';
        
        toast.innerHTML = `
            <i class="fas fa-${icon}"></i>
            <span>${message}</span>
        `;
        
        container.appendChild(toast);
        
        // Remove after 3 seconds
        setTimeout(() => {
            if (toast.parentNode === container) {
                container.removeChild(toast);
            }
        }, 3000);
    },

    // ==================== COMPLETE FORM HANDLERS ====================
    async handleInvestment(e) {
        e.preventDefault();
        this.log('info', 'Processing investment request');
        
        if (!this.state.currentUser) {
            this.showToast('Please login to make an investment', 'error');
            this.showPage('login');
            return;
        }
        
        const planId = this.getValue('investment-plan');
        const amount = parseFloat(this.getValue('investment-amount'));
        const proofFile = document.getElementById('investment-proof').files[0];
        
        // Validation
        if (!planId) {
            this.showToast('Please select an investment plan', 'error');
            return;
        }
        
        const plan = this.state.investmentPlans.find(p => p._id === planId);
        if (!plan) {
            this.showToast('Invalid investment plan selected', 'error');
            return;
        }
        
        if (amount < (plan.min_amount || this.config.MIN_INVESTMENT)) {
            this.showToast(`Minimum investment for ${plan.name} is ${this.formatCurrency(plan.min_amount || this.config.MIN_INVESTMENT)}`, 'error');
            return;
        }
        
        if (!proofFile) {
            this.showToast('Please upload payment proof', 'error');
            return;
        }
        
        try {
            const formData = new FormData();
            formData.append('plan_id', planId);
            formData.append('amount', amount);
            formData.append('payment_proof', proofFile);
            
            const response = await this.apiRequest('/api/investments', {
                method: 'POST',
                body: formData
            });
            
            this.showToast('Investment request submitted successfully!', 'success');
            this.closeModal('invest-modal');
            this.updateDashboard();
            this.log('success', 'Investment submitted', { planId, amount });
        } catch (error) {
            this.log('error', 'Investment submission failed', error);
        }
    },

    async handleDeposit(e) {
        e.preventDefault();
        this.log('info', 'Processing deposit request');
        
        if (!this.state.currentUser) {
            this.showToast('Please login to make a deposit', 'error');
            this.showPage('login');
            return;
        }
        
        const amount = parseFloat(this.getValue('deposit-amount'));
        const paymentMethod = this.getValue('deposit-method');
        const proofFile = document.getElementById('deposit-proof').files[0];
        
        // Validation
        if (amount < this.config.MIN_DEPOSIT) {
            this.showToast(`Minimum deposit is ${this.formatCurrency(this.config.MIN_DEPOSIT)}`, 'error');
            return;
        }
        
        if (!proofFile) {
            this.showToast('Please upload payment proof', 'error');
            return;
        }
        
        try {
            const formData = new FormData();
            formData.append('amount', amount);
            formData.append('payment_method', paymentMethod);
            formData.append('payment_proof', proofFile);
            
            const response = await this.apiRequest('/api/deposits', {
                method: 'POST',
                body: formData
            });
            
            this.showToast('Deposit request submitted successfully!', 'success');
            this.closeModal('deposit-modal');
            this.log('success', 'Deposit submitted', { amount, paymentMethod });
        } catch (error) {
            this.log('error', 'Deposit submission failed', error);
        }
    },

    async handleWithdrawal(e) {
        e.preventDefault();
        this.log('info', 'Processing withdrawal request');
        
        if (!this.state.currentUser) {
            this.showToast('Please login to make a withdrawal', 'error');
            this.showPage('login');
            return;
        }
        
        const amount = parseFloat(this.getValue('withdraw-amount'));
        const paymentMethod = this.getValue('withdraw-method');
        
        // Validation
        if (amount < this.config.MIN_WITHDRAWAL) {
            this.showToast(`Minimum withdrawal is ${this.formatCurrency(this.config.MIN_WITHDRAWAL)}`, 'error');
            return;
        }
        
        if (amount > (this.state.currentUser.balance || 0)) {
            this.showToast('Insufficient balance for withdrawal', 'error');
            return;
        }
        
        try {
            const response = await this.apiRequest('/api/withdrawals', {
                method: 'POST',
                body: {
                    amount: amount,
                    payment_method: paymentMethod
                }
            });
            
            this.showToast('Withdrawal request submitted successfully!', 'success');
            this.closeModal('withdraw-modal');
            this.updateDashboard();
            this.log('success', 'Withdrawal submitted', { amount, paymentMethod });
        } catch (error) {
            this.log('error', 'Withdrawal submission failed', error);
        }
    },

    updateWithdrawalFee() {
        const amountInput = document.getElementById('withdraw-amount');
        if (!amountInput) return;
        
        const amount = parseFloat(amountInput.value) || 0;
        const fee = amount * (this.config.PLATFORM_FEE_PERCENT / 100);
        const netAmount = amount - fee;
        
        // Update UI if elements exist
        const feeElement = document.getElementById('withdrawal-fee');
        const netElement = document.getElementById('net-amount');
        
        if (feeElement) feeElement.textContent = this.formatCurrency(fee);
        if (netElement) netElement.textContent = this.formatCurrency(netAmount);
    },

    calculateInvestmentInterest() {
        const planId = this.getValue('investment-plan');
        const amount = parseFloat(this.getValue('investment-amount')) || 0;
        
        if (!planId || amount === 0) return;
        
        const plan = this.state.investmentPlans.find(p => p._id === planId);
        if (!plan) return;
        
        const dailyInterest = (amount * (plan.daily_interest || 0) / 100);
        const totalInterest = (amount * (plan.total_interest || 0) / 100);
        
        // Update UI if elements exist
        const dailyElement = document.getElementById('daily-interest');
        const totalElement = document.getElementById('total-interest');
        
        if (dailyElement) dailyElement.textContent = this.formatCurrency(dailyInterest);
        if (totalElement) totalElement.textContent = this.formatCurrency(totalInterest);
    },

    // ==================== COMPLETE PROFILE MANAGEMENT ====================
    async loadProfileData() {
        if (!this.state.currentUser) return;
        
        try {
            const response = await this.apiRequest('/api/profile');
            const user = response.data.user;
            
            // Update personal info
            this.setValue('profile-fullname', user.full_name || '');
            this.setValue('profile-email', user.email || '');
            this.setValue('profile-phone', user.phone || '');
            
            // Update KYC status
            const kycStatusElement = document.getElementById('kyc-status-text');
            if (kycStatusElement) {
                kycStatusElement.textContent = user.kyc_verified ? 'Verified' : 'Pending';
                kycStatusElement.className = user.kyc_verified ? 'status-badge approved' : 'status-badge pending';
            }
            
            this.log('debug', 'Profile data loaded');
        } catch (error) {
            this.log('error', 'Failed to load profile data', error);
        }
    },

    setValue(elementId, value) {
        const element = document.getElementById(elementId);
        if (element) {
            element.value = value || '';
        }
    },

    async handleProfileUpdate(e) {
        e.preventDefault();
        
        const formData = {
            full_name: this.getValue('profile-fullname'),
            phone: this.getValue('profile-phone')
        };
        
        try {
            const response = await this.apiRequest('/api/profile', {
                method: 'PUT',
                body: formData
            });
            
            this.state.currentUser = response.data.user;
            this.showToast('Profile updated successfully!', 'success');
            this.log('success', 'Profile updated', formData);
        } catch (error) {
            this.log('error', 'Profile update failed', error);
        }
    },

    async handleBankUpdate(e) {
        e.preventDefault();
        
        const formData = {
            bank_name: this.getValue('bank-name'),
            account_name: this.getValue('account-name'),
            account_number: this.getValue('account-number')
        };
        
        try {
            const response = await this.apiRequest('/api/profile/bank', {
                method: 'PUT',
                body: formData
            });
            
            this.showToast('Bank details updated successfully!', 'success');
            this.log('success', 'Bank details updated');
        } catch (error) {
            this.log('error', 'Bank details update failed', error);
        }
    },

    async handlePasswordChange(e) {
        e.preventDefault();
        
        const currentPassword = this.getValue('current-password');
        const newPassword = this.getValue('new-password');
        const confirmPassword = this.getValue('confirm-new-password');
        
        if (newPassword !== confirmPassword) {
            this.showToast('New passwords do not match!', 'error');
            return;
        }
        
        if (newPassword.length < 6) {
            this.showToast('New password must be at least 6 characters', 'error');
            return;
        }
        
        try {
            // Note: Implement backend endpoint for password change
            this.showToast('Password change functionality requires backend setup', 'info');
            e.target.reset();
            this.log('info', 'Password change attempted');
        } catch (error) {
            this.log('error', 'Password change failed', error);
        }
    },

    // ==================== COMPLETE KYC SUBMISSION ====================
    async handleKYCSubmission(e) {
        e.preventDefault();
        
        const idType = this.getValue('id-type');
        const idNumber = this.getValue('id-number');
        const idFrontFile = document.getElementById('id-front').files[0];
        const selfieFile = document.getElementById('selfie-with-id').files[0];
        
        // Validation
        if (!idType || !idNumber) {
            this.showToast('Please fill all required fields', 'error');
            return;
        }
        
        if (!idFrontFile || !selfieFile) {
            this.showToast('Please upload required documents', 'error');
            return;
        }
        
        try {
            const formData = new FormData();
            formData.append('id_type', idType);
            formData.append('id_number', idNumber);
            formData.append('id_front', idFrontFile);
            formData.append('selfie_with_id', selfieFile);
            
            const response = await this.apiRequest('/api/kyc', {
                method: 'POST',
                body: formData
            });
            
            this.showToast('KYC application submitted successfully!', 'success');
            
            // Update KYC status
            const kycStatusElement = document.getElementById('kyc-status-text');
            if (kycStatusElement) {
                kycStatusElement.textContent = 'Pending';
                kycStatusElement.className = 'status-badge pending';
            }
            
            // Reset form
            e.target.reset();
            document.getElementById('id-front-preview').style.display = 'none';
            document.getElementById('selfie-with-id-preview').style.display = 'none';
            
            this.log('success', 'KYC submitted', { idType });
        } catch (error) {
            this.log('error', 'KYC submission failed', error);
        }
    },

    // ==================== COMPLETE REFERRAL SYSTEM ====================
    async loadReferralData() {
        if (!this.state.currentUser) return;
        
        try {
            const response = await this.apiRequest('/api/referrals/stats');
            const stats = response.data.stats || {};
            
            // Update referral link and code
            const baseUrl = window.location.origin;
            const referralLink = `${baseUrl}?ref=${this.state.currentUser.referral_code || ''}`;
            
            this.setValue('referral-link', referralLink);
            this.setValue('referral-code', this.state.currentUser.referral_code || '');
            
            // Update stats
            this.setTextContent('total-referrals', stats.total_referrals || 0);
            this.setTextContent('active-referrals', stats.active_referrals || 0);
            this.updateCurrencyDisplay('total-referral-earnings', stats.total_earnings || 0);
            
            this.log('debug', 'Referral data loaded');
        } catch (error) {
            this.log('error', 'Failed to load referral data', error);
        }
    },

    copyReferralLink() {
        const linkInput = document.getElementById('referral-link');
        linkInput.select();
        document.execCommand('copy');
        this.showToast('Referral link copied to clipboard!', 'success');
    },

    copyReferralCode() {
        const codeInput = document.getElementById('referral-code');
        codeInput.select();
        document.execCommand('copy');
        this.showToast('Referral code copied to clipboard!', 'success');
    },

    checkReferralFromURL() {
        const urlParams = new URLSearchParams(window.location.search);
        const referralCode = urlParams.get('ref');
        if (referralCode && document.getElementById('referral')) {
            document.getElementById('referral').value = referralCode;
            this.log('debug', `Referral code detected: ${referralCode}`);
        }
    },

    // ==================== COMPLETE SUPPORT SYSTEM ====================
    async handleSupportRequest(e) {
        e.preventDefault();
        
        const formData = {
            subject: this.getValue('support-subject'),
            message: this.getValue('support-message')
        };
        
        try {
            const response = await this.apiRequest('/api/support', {
                method: 'POST',
                body: formData
            });
            
            this.showToast('Support ticket submitted successfully!', 'success');
            e.target.reset();
            this.log('success', 'Support ticket submitted', { subject: formData.subject });
        } catch (error) {
            this.log('error', 'Support ticket submission failed', error);
        }
    },

    // ==================== COMPLETE IMAGE VIEWER ====================
    viewImage(imageUrl, title = 'Image Preview') {
        if (!imageUrl) {
            this.showToast('No image available', 'error');
            return;
        }
        
        document.getElementById('image-view-title').textContent = title;
        document.getElementById('image-view-img').src = imageUrl;
        document.getElementById('image-view-download').href = imageUrl;
        document.getElementById('image-view-download').download = title.replace(/\s+/g, '_') + '.jpg';
        
        this.openModal('image-view-modal');
    },

    // ==================== COMPLETE PASSWORD RESET ====================
    async handlePasswordReset(e) {
        e.preventDefault();
        
        const email = this.getValue('reset-email');
        
        try {
            const response = await this.apiRequest('/api/auth/forgot-password', {
                method: 'POST',
                body: { email }
            });
            
            this.showToast('Password reset instructions sent to your email', 'success');
            this.closeModal('password-reset-modal');
            this.log('info', 'Password reset requested', { email });
        } catch (error) {
            this.log('error', 'Password reset failed', error);
        }
    },

    // ==================== COMPLETE LOGOUT ====================
    logout() {
        this.state.currentUser = null;
        this.state.token = null;
        this.state.isAdmin = false;
        this.state.isAuthenticated = false;
        localStorage.removeItem('raw_wealthy_token');
        this.showToast('You have been logged out.', 'info');
        this.showPage('home');
        this.log('info', 'User logged out');
    },

    // ==================== COMPLETE UI INITIALIZERS ====================
    initPasswordToggles() {
        document.querySelectorAll('.password-toggle').forEach(toggle => {
            toggle.addEventListener('click', function() {
                const input = this.previousElementSibling;
                const icon = this.querySelector('i');
                
                if (input.type === 'password') {
                    input.type = 'text';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                } else {
                    input.type = 'password';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                }
            });
        });
    },

    initFileUploadPreviews() {
        const fileInputs = [
            { input: 'investment-proof', preview: 'investment-preview' },
            { input: 'deposit-proof', preview: 'deposit-preview' },
            { input: 'id-front', preview: 'id-front-preview' },
            { input: 'selfie-with-id', preview: 'selfie-with-id-preview' }
        ];
        
        fileInputs.forEach(({ input, preview }) => {
            const inputElement = document.getElementById(input);
            const previewElement = document.getElementById(preview);
            
            if (inputElement && previewElement) {
                inputElement.addEventListener('change', (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            previewElement.src = e.target.result;
                            previewElement.style.display = 'block';
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }
        });
    },

    initAnimations() {
        // Intersection Observer for scroll animations
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate__animated', 'animate__fadeInUp');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });
        
        document.querySelectorAll('.feature, .plan-card, .step, .testimonial-card').forEach(el => {
            observer.observe(el);
        });
    },

    // ==================== COMPLETE TAB SWITCHING ====================
    switchProfileTab(tab) {
        ['personal', 'security', 'bank', 'kyc'].forEach(tabId => {
            const element = document.getElementById(`${tabId}-tab`);
            if (element) element.style.display = 'none';
        });
        
        document.querySelectorAll('.profile-nav a').forEach(item => {
            item.classList.remove('active');
        });
        
        const tabElement = document.getElementById(`${tab}-tab`);
        if (tabElement) {
            tabElement.style.display = 'block';
        }
        
        const navItems = document.querySelectorAll('.profile-nav a');
        navItems.forEach(item => {
            if (item.textContent.includes(tab.charAt(0).toUpperCase() + tab.slice(1))) {
                item.classList.add('active');
            }
        });
    },

    switchSupportCategory(category) {
        ['faq', 'contact'].forEach(catId => {
            const element = document.getElementById(`${catId}-category`);
            if (element) element.style.display = 'none';
        });
        
        document.querySelectorAll('.support-category').forEach(item => {
            item.classList.remove('active');
        });
        
        const categoryElement = document.getElementById(`${category}-category`);
        if (categoryElement) {
            categoryElement.style.display = 'block';
        }
        
        const categoryItems = document.querySelectorAll('.support-category');
        categoryItems.forEach(item => {
            if (item.textContent.includes(category.charAt(0).toUpperCase() + category.slice(1))) {
                item.classList.add('active');
            }
        });
    },

    switchAdminTab(tab) {
        ['overview', 'users', 'investments', 'deposits', 'withdrawals', 'kyc'].forEach(tabId => {
            const element = document.getElementById(`${tabId}-tab`);
            if (element) element.style.display = 'none';
        });
        
        document.querySelectorAll('.admin-nav a').forEach(item => {
            item.classList.remove('active');
        });
        
        const tabElement = document.getElementById(`${tab}-tab`);
        if (tabElement) {
            tabElement.style.display = 'block';
        }
        
        const navItems = document.querySelectorAll('.admin-nav a');
        navItems.forEach(item => {
            if (item.textContent.includes(tab.charAt(0).toUpperCase() + tab.slice(1))) {
                item.classList.add('active');
            }
        });
        
        // Load tab data with delay to ensure DOM is ready
        setTimeout(() => {
            if (tab === 'deposits') this.loadAdminDeposits();
            if (tab === 'investments') this.loadAdminInvestments();
            if (tab === 'withdrawals') this.loadAdminWithdrawals();
            if (tab === 'kyc') this.loadAdminKYC();
            if (tab === 'users') this.loadAdminUsers();
        }, 100);
    },

    toggleFaq(element) {
        const faqItem = element.parentElement;
        faqItem.classList.toggle('active');
    },

    // ==================== COMPLETE MODAL FUNCTIONS ====================
    openModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = 'flex';
            
            if (modalId === 'withdraw-modal' && this.state.currentUser) {
                document.getElementById('available-balance').textContent = 
                    this.formatCurrency(this.state.currentUser.balance || 0);
                this.updateWithdrawalFee();
            }
            
            if (modalId === 'invest-modal') {
                this.loadInvestmentPlansForModal();
            }
            
            this.log('debug', `Modal opened: ${modalId}`);
        }
    },

    closeModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = 'none';
            
            const form = modal.querySelector('form');
            if (form) form.reset();
            
            const previews = modal.querySelectorAll('.file-preview');
            previews.forEach(preview => {
                preview.style.display = 'none';
                preview.src = '';
            });
            
            const fileInputs = modal.querySelectorAll('input[type="file"]');
            fileInputs.forEach(input => input.value = '');
            
            this.log('debug', `Modal closed: ${modalId}`);
        }
    },

    loadInvestmentPlansForModal() {
        const select = document.getElementById('investment-plan');
        if (!select || this.state.investmentPlans.length === 0) return;
        
        select.innerHTML = '<option value="">Choose a raw material</option>' +
            this.state.investmentPlans.map(plan => `
                <option value="${plan._id}">${plan.name} - ${this.formatCurrency(plan.min_amount || 0)} Minimum</option>
            `).join('');
    },

    // ==================== COMPLETE CHART FUNCTIONS ====================
    createEarningsChart(transactionsData) {
        const ctx = document.getElementById('earnings-chart');
        if (!ctx) return;
        
        // Destroy existing chart
        if (this.state.charts.earnings) {
            this.state.charts.earnings.destroy();
        }
        
        // Prepare data
        const labels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
        const data = [12000, 19000, 15000, 25000, 22000, 30000, 28000];
        
        this.state.charts.earnings = new Chart(ctx.getContext('2d'), {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Daily Earnings',
                    data: data,
                    borderColor: '#10b981',
                    backgroundColor: 'rgba(16, 185, 129, 0.1)',
                    borderWidth: 2,
                    tension: 0.3,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: { color: 'rgba(255, 255, 255, 0.1)' },
                        ticks: {
                            color: '#94a3b8',
                            callback: function(value) {
                                return '' + value.toLocaleString();
                            }
                        }
                    },
                    x: {
                        grid: { color: 'rgba(255, 255, 255, 0.1)' },
                        ticks: { color: '#94a3b8' }
                    }
                }
            }
        });
    },

    createAdminChart(stats) {
        const ctx = document.getElementById('platform-growth-chart');
        if (!ctx) return;
        
        if (this.state.charts.admin) {
            this.state.charts.admin.destroy();
        }
        
        // Prepare data
        const labels = ['Users', 'Investments', 'Deposits', 'Withdrawals'];
        const data = [
            stats.overview?.total_users || 0,
            stats.overview?.total_investments || 0,
            stats.overview?.total_deposits || 0,
            stats.overview?.total_withdrawals || 0
        ];
        
        this.state.charts.admin = new Chart(ctx.getContext('2d'), {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Platform Statistics',
                    data: data,
                    backgroundColor: [
                        'rgba(59, 130, 246, 0.7)',
                        'rgba(16, 185, 129, 0.7)',
                        'rgba(245, 158, 11, 0.7)',
                        'rgba(239, 68, 68, 0.7)'
                    ],
                    borderColor: [
                        'rgb(59, 130, 246)',
                        'rgb(16, 185, 129)',
                        'rgb(245, 158, 11)',
                        'rgb(239, 68, 68)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: { color: 'rgba(255, 255, 255, 0.1)' },
                        ticks: { color: '#94a3b8' }
                    },
                    x: {
                        grid: { color: 'rgba(255, 255, 255, 0.1)' },
                        ticks: { color: '#94a3b8' }
                    }
                }
            }
        });
    },

    // ==================== COMPLETE DATA LOADING FUNCTIONS ====================
    async loadUserInvestments() {
        try {
            const response = await this.apiRequest('/api/investments?status=active&limit=5');
            const investments = response.data.investments || [];
            const container = document.getElementById('active-investments-list');
            
            if (container) {
                if (investments.length === 0) {
                    container.innerHTML = '<p style="color: var(--text-muted); text-align: center; padding: 2rem;">No active investments</p>';
                } else {
                    container.innerHTML = investments.map(inv => `
                        <div class="investment-item">
                            <div>
                                <div class="investment-name">${inv.plan?.name || 'Unknown'} Plan</div>
                                <div class="investment-status">${inv.status} - ${inv.remaining_days || 0} days remaining</div>
                            </div>
                            <div class="investment-amount">${this.formatCurrency(inv.amount || 0)}</div>
                        </div>
                    `).join('');
                }
            }
        } catch (error) {
            this.log('error', 'Failed to load user investments', error);
        }
    },

    async loadUserTransactions() {
        try {
            const response = await this.apiRequest('/api/transactions?limit=5');
            const transactions = response.data.transactions || [];
            const container = document.getElementById('recent-transactions-list');
            
            if (container) {
                if (transactions.length === 0) {
                    container.innerHTML = '<p style="color: var(--text-muted); text-align: center; padding: 2rem;">No transactions yet</p>';
                } else {
                    container.innerHTML = transactions.slice(0, 5).map(txn => {
                        const amountClass = txn.amount > 0 ? 'transaction-amount positive' : 'transaction-amount negative';
                        const amountSign = txn.amount > 0 ? '+' : '';
                        
                        return `
                            <div class="transaction-item">
                                <div>
                                    <div class="transaction-type">${txn.description}</div>
                                    <div class="transaction-date">${new Date(txn.createdAt).toLocaleDateString()}</div>
                                </div>
                                <div class="${amountClass}">${amountSign}${this.formatCurrency(Math.abs(txn.amount || 0))}</div>
                            </div>
                        `;
                    }).join('');
                }
            }
        } catch (error) {
            this.log('error', 'Failed to load user transactions', error);
        }
    },

    async loadAdminUsers() {
        try {
            const searchQuery = document.getElementById('user-search')?.value || '';
            const query = searchQuery ? `?search=${encodeURIComponent(searchQuery)}` : '';
            
            const response = await this.apiRequest(`/api/admin/users${query}`);
            const users = response.data.users || [];
            const table = document.getElementById('admin-users-table');
            
            if (table) {
                if (users.length === 0) {
                    table.innerHTML = `
                        <tr>
                            <td colspan="6" style="text-align: center; padding: 2rem; color: var(--text-muted);">
                                No users found
                            </td>
                        </tr>
                    `;
                } else {
                    table.innerHTML = users.map(user => `
                        <tr>
                            <td>
                                <div><strong>${user.full_name || 'N/A'}</strong></div>
                                <small style="color: var(--text-muted);">${user.email || 'N/A'}</small>
                            </td>
                            <td>${user.email || 'N/A'}</td>
                            <td>${this.formatCurrency(user.balance || 0)}</td>
                            <td>
                                <span class="status-badge ${user.is_active ? 'approved' : 'pending'}">
                                    ${user.is_active ? 'Active' : 'Inactive'}
                                </span>
                            </td>
                            <td>
                                <span class="status-badge ${user.kyc_verified ? 'approved' : 'pending'}">
                                    ${user.kyc_verified ? 'Verified' : 'Pending'}
                                </span>
                            </td>
                            <td>
                                <button class="btn btn-outline" style="padding: 0.3rem 0.8rem; font-size: 0.8rem;"
                                        onclick="app.viewUserDetails('${user._id}')">
                                    View
                                </button>
                            </td>
                        </tr>
                    `).join('');
                }
            }
        } catch (error) {
            this.log('error', 'Failed to load admin users', error);
        }
    },

    async loadAdminInvestments() {
        try {
            const status = document.getElementById('investment-status-filter')?.value || 'pending';
            const response = await this.apiRequest('/api/admin/pending-investments');
            const investments = response.data.investments || [];
            const table = document.getElementById('admin-investments-table');
            
            if (table) {
                if (investments.length === 0) {
                    table.innerHTML = `
                        <tr>
                            <td colspan="7" style="text-align: center; padding: 2rem; color: var(--text-muted);">
                                No investment requests found
                            </td>
                        </tr>
                    `;
                } else {
                    table.innerHTML = investments.map(inv => `
                        <tr>
                            <td>${inv.user?.full_name || 'Unknown User'}</td>
                            <td>${inv.plan?.name || 'Unknown Plan'}</td>
                            <td>${this.formatCurrency(inv.amount || 0)}</td>
                            <td>${new Date(inv.createdAt).toLocaleDateString()}</td>
                            <td>
                                <span class="status-badge ${inv.status || 'pending'}">
                                    ${inv.status || 'Pending'}
                                </span>
                            </td>
                            <td>
                                ${inv.payment_proof_url ? `
                                    <button class="btn btn-outline" 
                                            style="padding: 0.3rem 0.8rem; font-size: 0.8rem;"
                                            onclick="app.viewImage('${inv.payment_proof_url}', 'Investment Proof')">
                                        <i class="fas fa-eye"></i> View
                                    </button>
                                ` : 'No Proof'}
                            </td>
                            <td>
                                ${inv.status === 'pending' ? `
                                    <div style="display: flex; gap: 5px;">
                                        <button class="btn btn-outline" 
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem;"
                                                onclick="app.approveInvestment('${inv._id}')">
                                            Approve
                                        </button>
                                        <button class="btn btn-outline" 
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background: var(--error); color: white;"
                                                onclick="app.rejectInvestment('${inv._id}')">
                                            Reject
                                        </button>
                                    </div>
                                ` : `
                                    <span>Processed</span>
                                `}
                            </td>
                        </tr>
                    `).join('');
                }
            }
        } catch (error) {
            this.log('error', 'Failed to load admin investments', error);
        }
    },

    async loadAdminWithdrawals() {
        try {
            const status = document.getElementById('withdrawal-status-filter')?.value || 'pending';
            const response = await this.apiRequest('/api/admin/pending-withdrawals');
            const withdrawals = response.data.withdrawals || [];
            const table = document.getElementById('admin-withdrawals-table');
            
            if (table) {
                if (withdrawals.length === 0) {
                    table.innerHTML = `
                        <tr>
                            <td colspan="6" style="text-align: center; padding: 2rem; color: var(--text-muted);">
                                No withdrawal requests found
                            </td>
                        </tr>
                    `;
                } else {
                    table.innerHTML = withdrawals.map(withdrawal => `
                        <tr>
                            <td>${withdrawal.user?.full_name || 'Unknown User'}</td>
                            <td>${this.formatCurrency(withdrawal.amount || 0)}</td>
                            <td>${this.formatCurrency(withdrawal.net_amount || 0)}</td>
                            <td>${new Date(withdrawal.createdAt).toLocaleDateString()}</td>
                            <td>
                                <span class="status-badge ${withdrawal.status || 'pending'}">
                                    ${withdrawal.status || 'Pending'}
                                </span>
                            </td>
                            <td>
                                ${withdrawal.status === 'pending' ? `
                                    <div style="display: flex; gap: 5px;">
                                        <button class="btn btn-outline" 
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem;"
                                                onclick="app.approveWithdrawal('${withdrawal._id}')">
                                            Approve
                                        </button>
                                        <button class="btn btn-outline" 
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background: var(--error); color: white;"
                                                onclick="app.rejectWithdrawal('${withdrawal._id}')">
                                            Reject
                                        </button>
                                    </div>
                                ` : `
                                    <span>Processed</span>
                                `}
                            </td>
                        </tr>
                    `).join('');
                }
            }
        } catch (error) {
            this.log('error', 'Failed to load admin withdrawals', error);
        }
    },

    async loadAdminKYC() {
        try {
            const status = document.getElementById('kyc-status-filter')?.value || 'pending';
            const response = await this.apiRequest('/api/admin/pending-kyc');
            const kycRequests = response.data.kyc || [];
            const table = document.getElementById('admin-kyc-table');
            
            if (table) {
                if (kycRequests.length === 0) {
                    table.innerHTML = `
                        <tr>
                            <td colspan="7" style="text-align: center; padding: 2rem; color: var(--text-muted);">
                                No KYC requests found
                            </td>
                        </tr>
                    `;
                } else {
                    table.innerHTML = kycRequests.map(kyc => `
                        <tr>
                            <td>${kyc.user?.full_name || 'Unknown User'}</td>
                            <td>${kyc.id_type || 'N/A'}</td>
                            <td>${kyc.id_number || 'N/A'}</td>
                            <td>${new Date(kyc.createdAt).toLocaleDateString()}</td>
                            <td>
                                <span class="status-badge ${kyc.status || 'pending'}">
                                    ${kyc.status || 'Pending'}
                                </span>
                            </td>
                            <td>
                                <div style="display: flex; gap: 5px;">
                                    ${kyc.id_front_url ? `
                                        <button class="btn btn-outline" 
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem;"
                                                onclick="app.viewImage('${kyc.id_front_url}', 'ID Front')">
                                            <i class="fas fa-id-card"></i> ID
                                        </button>
                                    ` : ''}
                                    ${kyc.selfie_with_id_url ? `
                                        <button class="btn btn-outline" 
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem;"
                                                onclick="app.viewImage('${kyc.selfie_with_id_url}', 'Selfie with ID')">
                                            <i class="fas fa-user"></i> Selfie
                                        </button>
                                    ` : ''}
                                </div>
                            </td>
                            <td>
                                ${kyc.status === 'pending' ? `
                                    <div style="display: flex; gap: 5px;">
                                        <button class="btn btn-outline" 
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem;"
                                                onclick="app.approveKYC('${kyc._id}')">
                                            Approve
                                        </button>
                                        <button class="btn btn-outline" 
                                                style="padding: 0.3rem 0.8rem; font-size: 0.8rem; background: var(--error); color: white;"
                                                onclick="app.rejectKYC('${kyc._id}')">
                                            Reject
                                        </button>
                                    </div>
                                ` : `
                                    <span>Processed</span>
                                `}
                            </td>
                        </tr>
                    `).join('');
                }
            }
        } catch (error) {
            this.log('error', 'Failed to load admin KYC', error);
        }
    },

    // ==================== COMPLETE ADMIN FUNCTIONS ====================
    async approveInvestment(investmentId) {
        if (!confirm('Approve this investment?')) return;
        
        try {
            await this.apiRequest(`/api/admin/investments/${investmentId}/approve`, {
                method: 'POST'
            });
            
            this.showToast('Investment approved successfully!', 'success');
            this.loadAdminInvestments();
        } catch (error) {
            this.log('error', 'Failed to approve investment', error);
        }
    },

    async rejectInvestment(investmentId) {
        const reason = prompt('Enter rejection reason:');
        if (!reason) return;
        
        try {
            await this.apiRequest(`/api/admin/investments/${investmentId}/reject`, {
                method: 'POST',
                body: { rejection_reason: reason }
            });
            
            this.showToast('Investment rejected!', 'success');
            this.loadAdminInvestments();
        } catch (error) {
            this.log('error', 'Failed to reject investment', error);
        }
    },

    async approveWithdrawal(withdrawalId) {
        if (!confirm('Approve this withdrawal?')) return;
        
        try {
            await this.apiRequest(`/api/admin/withdrawals/${withdrawalId}/approve`, {
                method: 'POST'
            });
            
            this.showToast('Withdrawal approved successfully!', 'success');
            this.loadAdminWithdrawals();
        } catch (error) {
            this.log('error', 'Failed to approve withdrawal', error);
        }
    },

    async rejectWithdrawal(withdrawalId) {
        const reason = prompt('Enter rejection reason:');
        if (!reason) return;
        
        try {
            await this.apiRequest(`/api/admin/withdrawals/${withdrawalId}/reject`, {
                method: 'POST',
                body: { rejection_reason: reason }
            });
            
            this.showToast('Withdrawal rejected!', 'success');
            this.loadAdminWithdrawals();
        } catch (error) {
            this.log('error', 'Failed to reject withdrawal', error);
        }
    },

    async approveKYC(kycId) {
        if (!confirm('Approve this KYC?')) return;
        
        try {
            await this.apiRequest(`/api/admin/kyc/${kycId}/approve`, {
                method: 'POST'
            });
            
            this.showToast('KYC approved successfully!', 'success');
            this.loadAdminKYC();
        } catch (error) {
            this.log('error', 'Failed to approve KYC', error);
        }
    },

    async rejectKYC(kycId) {
        const reason = prompt('Enter rejection reason:');
        if (!reason) return;
        
        try {
            await this.apiRequest(`/api/admin/kyc/${kycId}/reject`, {
                method: 'POST',
                body: { rejection_reason: reason }
            });
            
            this.showToast('KYC rejected!', 'success');
            this.loadAdminKYC();
        } catch (error) {
            this.log('error', 'Failed to reject KYC', error);
        }
    },

    async viewUserDetails(userId) {
        try {
            const response = await this.apiRequest(`/api/admin/users/${userId}/dashboard`);
            const userData = response.data;
            
            const content = `
                <div style="padding: 1rem;">
                    <h3>User Dashboard - ${userData.user.full_name}</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                        <div>
                            <h4>Account Information</h4>
                            <p><strong>Email:</strong> ${userData.user.email}</p>
                            <p><strong>Phone:</strong> ${userData.user.phone || 'N/A'}</p>
                            <p><strong>Balance:</strong> ${this.formatCurrency(userData.user.balance || 0)}</p>
                            <p><strong>KYC Status:</strong> ${userData.user.kyc_verified ? 'Verified' : 'Pending'}</p>
                        </div>
                        <div>
                            <h4>Financial Summary</h4>
                            <p><strong>Total Investments:</strong> ${this.formatCurrency(userData.financial_summary?.total_invested || 0)}</p>
                            <p><strong>Total Earnings:</strong> ${this.formatCurrency(userData.financial_summary?.total_earned || 0)}</p>
                            <p><strong>Daily Interest:</strong> ${this.formatCurrency(userData.financial_summary?.daily_interest || 0)}</p>
                            <p><strong>Portfolio Value:</strong> ${this.formatCurrency(userData.financial_summary?.portfolio_value || 0)}</p>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('user-details-content').innerHTML = content;
            this.openModal('user-details-modal');
        } catch (error) {
            this.log('error', 'Failed to load user details', error);
            this.showToast('Failed to load user details', 'error');
        }
    },

    // ==================== COMPLETE HELPER FUNCTIONS ====================
    updateDepositStats(deposits) {
        const total = deposits.length;
        const pending = deposits.filter(d => d.status === 'pending').length;
        const approved = deposits.filter(d => d.status === 'approved').length;
        const rejected = deposits.filter(d => d.status === 'rejected').length;
        const totalValue = deposits.reduce((sum, d) => sum + (d.amount || 0), 0);
        
        this.setTextContent('deposit-count', total);
        this.setTextContent('deposit-pending-count', pending);
        this.setTextContent('deposit-approved-count', approved);
        this.setTextContent('deposit-rejected-count', rejected);
        this.updateCurrencyDisplay('deposit-total-value', totalValue);
    },

    updateHomeStats() {
        // Update home page statistics
        const stats = {
            totalInvested: 2500000000, // 2.5B
            activeInvestors: 15240,
            userRating: 4.9
        };
        
        this.setTextContent('total-invested-stat', this.formatCurrency(stats.totalInvested));
        this.setTextContent('active-investors-stat', stats.activeInvestors.toLocaleString());
        this.setTextContent('user-rating-stat', stats.userRating.toFixed(1));
    },

    renderInvestmentPlans() {
        const container = document.getElementById('plans-container');
        if (!container || this.state.investmentPlans.length === 0) return;
        
        container.innerHTML = this.state.investmentPlans.slice(0, 3).map(plan => `
            <div class="plan-card card-hover">
                <div class="plan-header">
                    <h3 class="plan-name">${plan.name}</h3>
                    <div class="plan-price">${this.formatCurrency(plan.min_amount || 0)}</div>
                    <div class="plan-period">Minimum Investment</div>
                </div>
                <div class="plan-features">
                    <div class="plan-feature">
                        <i class="fas fa-check-circle"></i>
                        <span>Daily Returns: ${plan.daily_interest || 0}%</span>
                    </div>
                    <div class="plan-feature">
                        <i class="fas fa-check-circle"></i>
                        <span>Total Returns: ${plan.total_interest || 0}%</span>
                    </div>
                    <div class="plan-feature">
                        <i class="fas fa-check-circle"></i>
                        <span>Duration: ${plan.duration || 0} Days</span>
                    </div>
                </div>
                <button class="btn btn-primary plan-button" onclick="app.showPage('investment-plans')">
                    View Details
                </button>
            </div>
        `).join('');
    },

    loadInvestmentPlansPage() {
        const container = document.getElementById('investment-plans-list');
        if (!container || this.state.investmentPlans.length === 0) return;
        
        container.innerHTML = this.state.investmentPlans.map(plan => `
            <div class="plan-card card-hover">
                ${plan.is_popular ? '<div class="plan-badge">Most Popular</div>' : ''}
                <div class="plan-header">
                    <h3 class="plan-name">${plan.name}</h3>
                    <div class="plan-price">${this.formatCurrency(plan.min_amount || 0)}</div>
                    <div class="plan-period">Minimum Investment</div>
                </div>
                <div class="plan-features">
                    <div class="plan-feature">
                        <i class="fas fa-check-circle"></i>
                        <span>Daily Returns: ${plan.daily_interest || 0}%</span>
                    </div>
                    <div class="plan-feature">
                        <i class="fas fa-check-circle"></i>
                        <span>Total Returns: ${plan.total_interest || 0}%</span>
                    </div>
                    <div class="plan-feature">
                        <i class="fas fa-check-circle"></i>
                        <span>Duration: ${plan.duration || 0} Days</span>
                    </div>
                    <div class="plan-feature">
                        <i class="fas fa-check-circle"></i>
                        <span>${plan.description || 'Premium investment opportunity'}</span>
                    </div>
                </div>
                <button class="btn btn-primary plan-button" onclick="app.openInvestmentModal('${plan._id}')">
                    Invest Now
                </button>
            </div>
        `).join('');
    },

    // ==================== FINAL INITIALIZATION ====================
    start() {
        // Initialize the application
        window.addEventListener('DOMContentLoaded', () => {
            this.init();
        });
        
        // Export app to window for debugging
        window.RawWealthy = this;
        
        // Global error handler
        window.addEventListener('error', (event) => {
            this.log('error', 'Unhandled error', {
                message: event.message,
                filename: event.filename,
                lineno: event.lineno,
                colno: event.colno,
                error: event.error
            });
        });
        
        // Unhandled promise rejection handler
        window.addEventListener('unhandledrejection', (event) => {
            this.log('error', 'Unhandled promise rejection', {
                reason: event.reason,
                promise: event.promise
            });
        });
    }
};

// ==================== START THE APPLICATION ====================
app.start();</script>
</body>
</html>
